{"version":3,"sources":["components/Homepage/Sidebar.js","components/Homepage/FilmCard.js","components/Homepage/Pagination.js","components/Homepage/Catalog.js","components/Navbar.js","components/Footer.js","components/Homepage/Home.js","components/Film/SearchedFilm.js","components/Login/Login.js","components/Registration/Registration.js","components/User/UserSidebar.js","components/User/UserCatalog.js","components/User/UserMenu.js","components/UserSearch/SearchUserSidebar.js","components/UserSearch/SearchUserCatalog.js","components/UserSearch/SearchUserMenu.js","components/404Page/Page404.js","App.js","index.js"],"names":["Sidebar","_ref","genres","currentGenre","setCurrentGenre","setIsRendered","_jsxs","children","_jsx","id","filter","genre","name","map","index","onClick","e","target","innerText","Card","film","className","href","concat","Title","src","Poster","alt","Plot","Genre","imdbRating","imdbVotes","Pagination","pagesNumber","onPageClick","currentPage","ListPages","content","push","Catalog","isRendered","changeGenreButton","useRef","articleFilms","articleGenres","titleGenre","films","paginationBar","getActualPageFilms","fetch","current","headers","Accept","then","response","json","_ref2","listOfFilms","useEffect","res","_ref3","pagesLength","Math","ceil","isNaN","dataset","page","changeMode","style","display","innerHTML","SectionFilms","React","Fragment","ref","imdbID","Navbar","token","setToken","userButton","logoutButton","history","useHistory","input","setInput","useState","results","setResults","user","setUser","suggestions","movieSearch","setMovieSearch","showResults","setShowResults","changeSearch","chosenSearch","tokenNotValid","checkAccess","Authorization","method","data","username","auth","tokenIsValid","catch","handleOutsideClick","event","contains","window","addEventListener","removeEventListener","timeoutSearch","setTimeout","Response","Search","clearTimeout","onSubmit","preventDefault","spellCheck","autoComplete","type","value","onChange","placeholder","length","undefined","opacity","deleteToken","document","cookie","Footer","Home","sort","a","b","localeCompare","SearchedFilm","setData","title","useParams","sectionFilm","followingLikes","setFollowingLikes","starValue","setStarValue","url","encodeURI","found","body","JSON","stringify","_ref5","voted","fetchFilmLike","likes","Runtime","Released","Director","Actors","Awards","_ref6","Rating","newValue","onLikeClick","rating","_ref4","vote","precision","emptyIcon","StarIcon","sx","stroke","strokeWidth","color","fontSize","Login","message","setMessage","inputUsername","setInputUsername","inputPassword","setInputPassword","onFormSubmit","password","role","htmlFor","Registration","setUsername","mail","setMail","setPassoword","isFormValid","setIsFormValid","usernameInput","passwordInput","mailInput","validPassword","passwordHelper","validMail","mailHelper","validUsername","usernameHelper","submitButton","regex","match","classList","remove","add","checkFormValid","disabled","backgroundColor","onGenreClick","UserCatalog","includes","UserFilms","clicked","allGenres","userGenres","userFilms","onButtonFilterClick","UserSidebar","toUpperCase","ChartJS","register","ArcElement","Tooltip","Legend","data_graph","datasets","label","borderColor","borderWidth","SearchUserFilms","favoriteGenre","userId","followed","setFollowed","buttonText","setButtonText","buttonColor","setButtonColor","followers","setFollowers","followings","setFollowings","viewFollowings","setViewFollowings","viewFollowers","setViewFollowers","getFavoriteGenre","genreCounts","flatMap","movie","split","trim","reduce","acc","labels","Object","keys","key","console","log","cur","handleConnections","checkFollow","entries","class","_ref7","handleFollow","status","width","margin","Doughnut","Page404","App","cname","ca","decodeURIComponent","i","c","charAt","substring","indexOf","getCookie","Router","Switch","Route","exact","path","SearchUserMenu","UserMenu","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.58df440c.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre, setIsRendered }) => {\r\n  return (\r\n    <aside>\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        {genres\r\n          .filter((genre) => genre.name !== currentGenre)\r\n          .map((genre, index) => {\r\n            return (\r\n              <li\r\n                key={index}\r\n                onClick={(e) => {\r\n                  setCurrentGenre(e.target.innerText)\r\n                  setIsRendered(false)\r\n                }}>\r\n                <span>\r\n                  <span>\r\n                    <span>{genre.name}</span>\r\n                  </span>\r\n                </span>\r\n              </li>\r\n            )\r\n          })}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst Card = ({ film }) => {\r\n  return (\r\n    <li className=\"card\">\r\n      <a href={`/film/${film.Title}`}>\r\n        <img className=\"card-img-top\" src={film.Poster} alt=\"Cardcap\" />\r\n      </a>\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">{film.Title}</h5>\r\n        <hr />\r\n        <p className=\"card-text\" id=\"plot\">\r\n          {film.Plot}\r\n        </p>\r\n        <h6 className=\"card-label\">GENRE</h6>\r\n        <p className=\"card-text\" id=\"filmGenre\">\r\n          {film.Genre}\r\n        </p>\r\n        <h6 className=\"card-label\">IMDB RATING</h6>\r\n        <p className=\"card-text\">\r\n          {film.imdbRating}\r\n          <i className=\"far fa-star\"></i> | {film.imdbVotes}\r\n          <i className=\"fas fa-vote-yea\"></i>\r\n        </p>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card\r\n","import React, { useState } from \"react\"\r\nimport \"./pagination.css\"\r\n\r\nconst Pagination = ({ pagesNumber, onPageClick, currentPage }) => {\r\n  const ListPages = () => {\r\n    const content = []\r\n    for (let index = 0; index < pagesNumber; index++) {\r\n      content.push(\r\n        <li\r\n          className={+currentPage === index ? \"active page-item\" : \"page-item\"}\r\n          data-page={index}\r\n          key={index}\r\n          onClick={onPageClick}>\r\n          {index + 1}\r\n        </li>\r\n      )\r\n    }\r\n\r\n    return content\r\n  }\r\n\r\n  return (\r\n    <ul className=\"pagination justify-content-center\">\r\n      {+currentPage > 0 ? (\r\n        <li\r\n          data-page={+currentPage - 1}\r\n          onClick={onPageClick}\r\n          className=\"page-item\">\r\n          <i className=\"fas fa-angle-double-left\"></i>\r\n        </li>\r\n      ) : null}\r\n      <ListPages />\r\n      {+currentPage + 1 < pagesNumber ? (\r\n        <li\r\n          data-page={+currentPage + 1}\r\n          onClick={onPageClick}\r\n          className=\"page-item\">\r\n          <i className=\"fas fa-angle-double-right\"></i>\r\n        </li>\r\n      ) : null}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Pagination\r\n","import React, { useEffect, useRef } from \"react\"\r\nimport Card from \"./FilmCard.js\"\r\nimport Pagination from \"./Pagination.js\"\r\n\r\nconst Catalog = ({\r\n  currentGenre,\r\n  genres,\r\n  setCurrentGenre,\r\n  isRendered,\r\n  setIsRendered\r\n}) => {\r\n  const changeGenreButton = useRef()\r\n  const articleFilms = useRef()\r\n  const articleGenres = useRef()\r\n  const titleGenre = useRef()\r\n  const films = useRef([])\r\n  const currentPage = useRef(0)\r\n  const pagesNumber = useRef()\r\n  const paginationBar = useRef()\r\n\r\n  const getActualPageFilms = () => {\r\n    fetch(`/films?genre=${currentGenre}&page=${currentPage.current}`, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ listOfFilms }) => {\r\n        films.current = listOfFilms\r\n        setIsRendered(true)\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    currentPage.current = 0\r\n    getActualPageFilms()\r\n  }, [currentGenre])\r\n\r\n  useEffect(() => {\r\n    fetch(`/pagination?genre=${currentGenre}`)\r\n      .then((res) => res.json())\r\n      .then(\r\n        ({ pagesLength }) => (pagesNumber.current = Math.ceil(pagesLength / 10))\r\n      )\r\n  })\r\n\r\n  const onPageClick = (e) => {\r\n    setIsRendered(false)\r\n    currentPage.current = isNaN(e.target.dataset.page)\r\n      ? 0\r\n      : e.target.dataset.page\r\n    getActualPageFilms()\r\n  }\r\n\r\n  const changeMode = () => {\r\n    if (articleFilms.current.style.display !== \"none\") {\r\n      articleFilms.current.style.display = \"none\"\r\n      paginationBar.current.style.display = \"none\"\r\n      articleGenres.current.style.display = \"grid\"\r\n      titleGenre.current.innerHTML = \"Choose the genre\"\r\n    } else {\r\n      articleFilms.current.style.display = \"grid\"\r\n      paginationBar.current.style.display = \"block\"\r\n      articleGenres.current.style.display = \"none\"\r\n      titleGenre.current.innerHTML = currentGenre\r\n    }\r\n  }\r\n\r\n  const SectionFilms = () => {\r\n    if (isRendered) {\r\n      return (\r\n        <React.Fragment>\r\n          <article id=\"articleFilms\" ref={articleFilms}>\r\n            {films.current.map((film) => {\r\n              return <Card film={film} key={film.imdbID} />\r\n            })}\r\n          </article>\r\n          <nav ref={paginationBar}>\r\n            {pagesNumber.current > 1 ? (\r\n              <Pagination\r\n                onPageClick={onPageClick}\r\n                pagesNumber={pagesNumber.current}\r\n                currentPage={currentPage.current}\r\n              />\r\n            ) : null}\r\n          </nav>\r\n        </React.Fragment>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div className=\"module-border-wrap\">\r\n        <div id=\"slogan\">\r\n          <img src=\"/img/logo.jpg\" alt=\"logo\" />\r\n          <h2>Search. Vote. Save.</h2>\r\n          <h1>ANY MOVIE IN YOUR MIND</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"genre\" id={currentGenre}>\r\n        <h1 id=\"currentGenre\" ref={titleGenre}>\r\n          {currentGenre}\r\n        </h1>\r\n        <i\r\n          id=\"changeGenre\"\r\n          ref={changeGenreButton}\r\n          onClick={changeMode}\r\n          className=\"fas fa-exchange-alt\"></i>\r\n      </div>\r\n\r\n      <SectionFilms />\r\n\r\n      <article id=\"articleGenres\" ref={articleGenres}>\r\n        <ul>\r\n          {genres\r\n            .filter((genre) => genre.name !== currentGenre)\r\n            .map((genre) => {\r\n              return (\r\n                <li\r\n                  key={genre.id}\r\n                  onClick={(e) => {\r\n                    setCurrentGenre(e.target.innerText)\r\n                    setIsRendered(false)\r\n                    changeMode()\r\n                  }}>\r\n                  <span>\r\n                    <span>\r\n                      <span>{genre.name}</span>\r\n                    </span>\r\n                  </span>\r\n                </li>\r\n              )\r\n            })}\r\n        </ul>\r\n      </article>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Catalog\r\n","import fetch from \"node-fetch\"\r\nimport React, { useState, useEffect, useRef } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nconst Navbar = ({ token, setToken}) => {\r\n  const userButton = useRef()\r\n  const logoutButton = useRef()\r\n  const history = useHistory()\r\n  const [input, setInput] = useState(\"\")\r\n  const [results, setResults] = useState([])\r\n  const [user, setUser] = useState('')\r\n  const suggestions = useRef()\r\n  const [movieSearch, setMovieSearch] = useState(true)\r\n  const [showResults, setShowResults] = useState(false)\r\n\r\n  const changeSearch = (chosenSearch) => {\r\n    if(movieSearch!==chosenSearch){\r\n      setInput('')\r\n      setResults([])\r\n      setMovieSearch(chosenSearch);\r\n    }\r\n  };\r\n\r\n  const tokenIsValid = (username) => {\r\n    setUser(username)\r\n    userButton.current.href = `/profile`\r\n    userButton.current.innerHTML = `<i class=\"fa fa-user\"></i> ${username}`\r\n    userButton.current.style[\"border-radius\"] = \"10px 0 0 10px\"\r\n    logoutButton.current.style.display = \"inline\"\r\n  }\r\n\r\n  const tokenNotValid = () => {\r\n    userButton.current.href = \"/login\"\r\n    userButton.current.innerHTML = \"<i class='fa fa-user'></i> GET STARTED\"\r\n    userButton.current.style[\"border-radius\"] = \"10px\"\r\n    logoutButton.current.style.display = \"none\"\r\n  }\r\n\r\n  const checkAccess = () => {\r\n    if (token !== \"\") {\r\n      fetch(\"/token\", {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          Authorization: \"Bearer \" + token\r\n        },\r\n        method: \"POST\"\r\n      })\r\n        .then((response) => {\r\n          return response.json()\r\n        })\r\n        .then((data) => {\r\n          const { username, auth } = data\r\n          auth ? tokenIsValid(username) : tokenNotValid()\r\n        })\r\n        .catch(() => {\r\n          tokenNotValid()\r\n        })\r\n    } else {\r\n      tokenNotValid()\r\n    }\r\n  }\r\n\r\n  const deleteToken = () => {\r\n    document.cookie =\r\n      \"jwt=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\r\n    setToken(\"\")\r\n    history.push(\"/\")\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleOutsideClick = (event) => {\r\n      if (suggestions.current && !suggestions.current.contains(event.target)) {\r\n        setShowResults(false)\r\n      } else {\r\n        setShowResults(true)\r\n      }\r\n    };\r\n\r\n    window.addEventListener('click', handleOutsideClick);\r\n\r\n    return () => {\r\n      window.removeEventListener('click', handleOutsideClick);\r\n    };\r\n  }, []); // Empty dependency array ensures this effect runs only once\r\n\r\n\r\n  useEffect(() => {\r\n    checkAccess()\r\n  }, [token])\r\n\r\n  useEffect(() => {\r\n    const timeoutSearch = setTimeout(() => {\r\n      if (input) {\r\n        if (movieSearch){\r\n          fetch(`/search-movie?s=${input}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            if (data.Response) {\r\n              setShowResults(true)\r\n              setResults(data.Search)\r\n            } else {\r\n              setResults([])\r\n            }\r\n          })\r\n          .catch(() => {\r\n            setResults([])\r\n          })\r\n        } else {\r\n          fetch(`/search-user?s=${input}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setShowResults(true)\r\n            setResults(data)\r\n          })\r\n          .catch(() => {\r\n            setResults([])\r\n          })\r\n        }\r\n        \r\n      }\r\n    }, 300)\r\n    return () => {\r\n      clearTimeout(timeoutSearch)\r\n    }\r\n  }, [input])\r\n\r\n  return (\r\n    <header>\r\n      <a href=\"/\">\r\n        <img src=\"/img/dkLogo.jpg\" alt=\"\" className=\"logo\" />\r\n      </a>\r\n\r\n      <form\r\n        id=\"searchFilm\"\r\n        className = {movieSearch ? 'searchFilm' : 'searchUsers'}\r\n        ref={suggestions}\r\n        onSubmit={(e) => {\r\n          e.preventDefault()\r\n        }}>\r\n\r\n        <input\r\n          className=\"input-field\"\r\n          spellCheck=\"false\"\r\n          autoComplete=\"off\"\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          id=\"inputFilm\"\r\n          name=\"title\"\r\n          placeholder= {movieSearch ? \"Search for a movie...\" : 'Search for a user...'}\r\n        />\r\n        <div id=\"suggestions\">\r\n          {(input.length === 0 || results === undefined || showResults === false) && (<span></span>)}\r\n          {(input.length>0 && results !== undefined && showResults === true && movieSearch === true) && (\r\n            <ul>\r\n                {results.map((film, index) => {\r\n                  return (\r\n                    <li key={index}>\r\n                      <a href={`/film/${film.Title}`}>\r\n                        <p>{film.Title}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                      </a>\r\n                    </li>\r\n                  )\r\n                })}\r\n              </ul>\r\n          )}\r\n          {(input.length>0 && results !== undefined && showResults === true && movieSearch === false) && (\r\n            <ul>\r\n              {results.map(({username, id}, index) => {\r\n                if (user !== username){\r\n                  return (\r\n                    <li key={index}>\r\n                      <a href={`/user-search/${id}`}>\r\n                        <p>{username}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                      </a>\r\n                    </li>\r\n                  )\r\n                }\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div id='changeSearch'>\r\n          <i className=\"fa-solid fa-film\" style={{ opacity: movieSearch ? 1 : 0.3 }} id='movieIcon' onClick={()=>changeSearch(true)}></i>\r\n          <i className=\"fa-solid fa-users\" style={{ opacity: movieSearch ? 0.3 : 1 }} id='usersIcon' onClick={()=>changeSearch(false)}></i>\r\n        </div>\r\n        \r\n      </form>\r\n\r\n      <div id=\"userInteraction\">\r\n        <a href=\"/login\" id=\"button-user\" ref={userButton}>\r\n          <i className=\"fa-solid fa-user\"></i> GET STARTED\r\n        </a>\r\n        <button id=\"button-logout\" ref={logoutButton} onClick={deleteToken}>\r\n          <i className=\"fa-solid fa-sign-out-alt\"></i> LOGOUT\r\n        </button>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Navbar\r\n","const Footer = () => {\r\n  return (\r\n    <footer className=\"page-footer font-small special-color-dark pt-4\">\r\n      <div className=\"container\">\r\n        <ul className=\"list-unstyled list-inline text-center\">\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.facebook.com/profile.php?id=100010848486989\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-facebook-f\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.instagram.com/matteo.mrl\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-instagram\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.linkedin.com/in/matteo-morellini-306a331a8/\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-linkedin\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://github.com/MatteoMorellini\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-github\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"footer-copyright text-center py-3\">\r\n        Created with passion by Matteo Morellini.\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport Sidebar from \"./Sidebar.js\"\r\nimport Catalog from \"./Catalog.js\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport \"./index.css\"\r\n\r\nconst Home = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"Action\")\r\n  const genres = useRef([])\r\n  const [isRendered, setIsRendered] = useState()\r\n\r\n  useEffect(() => {\r\n    fetch(\"/genres\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        genres.current = data\r\n        genres.current.sort((a,b) => {return a.name.localeCompare(b.name)})\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      <main className=\"main-homepage\">\r\n        <Sidebar\r\n          genres={genres.current}\r\n          currentGenre={currentGenre} // viene eliminato dalla lista il genere corrente\r\n          setCurrentGenre={setCurrentGenre} // nel momento in cui un genere viene cliccato, diventa il corrente\r\n          setIsRendered={setIsRendered} // con un nuovo genere è necessario un nuovo caricamento\r\n        />\r\n        <Catalog\r\n          currentGenre={currentGenre} // per il titolo della section\r\n          setCurrentGenre={setCurrentGenre} // con le mq il menù dei generi passa nel Catalog\r\n          genres={genres.current}\r\n          setIsRendered={setIsRendered} // con un nuovo genere è necessario un nuovo caricamento\r\n          isRendered={isRendered} // effetto loading\r\n        />\r\n      </main>\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","import fetch from \"node-fetch\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport \"./searchFilm.css\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport Box from '@mui/material/Box';\r\nimport Rating from '@mui/material/Rating';\r\nimport Typography from '@mui/material/Typography';\r\nimport StarIcon from '@mui/icons-material/Star';\r\n\r\nconst SearchedFilm = ({ token, setToken}) => {\r\n  const [data, setData] = useState()\r\n  const [isRendered, setIsRendered] = useState(false)\r\n  const { title } = useParams()\r\n  const sectionFilm = useRef()\r\n  const [followingLikes, setFollowingLikes] = useState(false)\r\n  const [starValue, setStarValue] = useState(0)\r\n\r\n  const fetchFilmLike = () => {\r\n    const url = encodeURI(`/film-like/${title}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    }).then((res) => res.json())\r\n    .then(({ auth, likes }) => {\r\n      if (auth && likes) {\r\n        setFollowingLikes(likes)\r\n      } else {\r\n        setFollowingLikes([])\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const url = encodeURI(`/film-data/${title}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    })\r\n      .then((res) => res.json())\r\n      .then(({ data, found }) => {\r\n        if (found) {\r\n          setData(data)\r\n        }\r\n        setIsRendered(true)\r\n      })\r\n  }, [])\r\n\r\n  const onLikeClick = (rating) => {\r\n    fetch(\"/vote\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      body: JSON.stringify({ title, rating }),\r\n      method: \"PUT\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, vote }) => {\r\n        if (auth && vote) {\r\n          setStarValue(rating)\r\n        }\r\n      })\r\n  }\r\n\r\n  const checkLike = () => {\r\n    fetch('/vote', {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      body: JSON.stringify({ title }),\r\n      method: \"POST\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, voted }) => {\r\n        if (auth && voted) {\r\n          setStarValue(voted)\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(token){\r\n      checkLike()\r\n      fetchFilmLike()\r\n    }\r\n  }, [token])\r\n\r\n  if (isRendered) {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar token={token} setToken={setToken}/>\r\n        {data !== undefined ? (\r\n          <section id=\"specificFilm\" ref={sectionFilm}>\r\n            <img src={data.Poster} alt=\"\" />\r\n            <div id=\"filmInformation\">\r\n              <h1 id=\"title\">{data.Title}</h1>\r\n              <h5 id=\"plot\">{data.Plot}</h5>\r\n              <h5 id=\"genre\">{data.Genre}</h5>\r\n              <h5 id=\"runtime\">{data.Runtime}</h5>\r\n              <h5 id=\"released\">{data.Released}</h5>\r\n              <h5 id=\"director\">Director: {data.Director}</h5>\r\n              <h5 id=\"actors\">Actors: {data.Actors}</h5>\r\n              <h5 id=\"awards\">{data.Awards}</h5>\r\n              <h5 id=\"imdbRating\">\r\n                {data.imdbRating} <i className=\"far fa-star\"></i> |{\" \"}\r\n                {data.imdbVotes} <i className=\"fas fa-vote-yea\"></i> IMDb\r\n                ratings\r\n              </h5>\r\n              {followingLikes!==false && (\r\n              <div id='friendsLike'>\r\n                    {followingLikes.length>0 && (\r\n                      <h5>People you follow that liked this movie: {followingLikes.map(([id, user], index) => (\r\n                        <React.Fragment key={index}>\r\n                        <a href={`/user-search/${id}`}>{user}</a>{index < followingLikes.length - 1 && ', '}\r\n                        </React.Fragment>\r\n                      ))}</h5>\r\n                    )}\r\n                    {followingLikes.length===0 && (\r\n                      <h5>None of the people you follow liked this movie yet</h5>\r\n                    )}\r\n                  </div>)}\r\n              {token && (\r\n                <div>\r\n                  <div id=\"vote\">\r\n                    <h5 id=\"textRating\">Rate the film</h5>\r\n                    <Rating name=\"rating\" onChange={(event, newValue)=>onLikeClick(newValue)} value={starValue} precision={1} emptyIcon = {<StarIcon sx={{ stroke: \"#f4a704\", strokeWidth: 1 }} color='auction' fontSize=\"inherit\"/>}/>\r\n                  </div>\r\n\r\n\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        ) : (\r\n          <div id=\"filmNotFound\">\r\n            <h1>\r\n              FILM <span>NOT FOUND</span> TRY ANOTHER NAME\r\n            </h1>\r\n          </div>\r\n        )}\r\n        <Footer />\r\n      </React.Fragment>\r\n    )\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar token={token} />\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>{\" \"}\r\n        <Footer />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SearchedFilm\r\n","import fetch from \"node-fetch\"\r\nimport React, { useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport \"./login.css\"\r\n\r\nconst Login = ({ setToken }) => {\r\n  const [message, setMessage] = useState()\r\n  const [inputUsername, setInputUsername] = useState(\"\")\r\n  const [inputPassword, setInputPassword] = useState(\"\")\r\n  const history = useHistory()\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (inputUsername.length > 0 && inputPassword.length > 0) {\r\n      fetch(\"/login\", {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          username: inputUsername,\r\n          password: inputPassword\r\n        })\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.message) {\r\n            setMessage(data.message)\r\n          } else {\r\n            setToken(data.token)\r\n            history.push(\"/\")\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"loginPage\">\r\n      <form id=\"loginForm\" onSubmit={onFormSubmit}>\r\n        <a href=\"/\">\r\n          <img src=\"/img/dkLogo.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n\r\n        {message === undefined ? (\r\n          <h1 id=\"title\">Log in</h1>\r\n        ) : (\r\n          <div className=\"alert alert-danger\" role=\"alert\">\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            value={inputUsername}\r\n            spellCheck=\"false\"\r\n            onChange={(e) => setInputUsername(e.target.value)}\r\n            autoComplete=\"username\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={inputPassword}\r\n            onChange={(e) => {\r\n              setInputPassword(e.target.value)\r\n            }}\r\n            autoComplete=\"new-password\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <a id=\"registrationLink\" href=\"/registration\">\r\n            Do not have an account? Create it now\r\n          </a>\r\n        </div>\r\n\r\n        <button className=\"btn\" onClick={onFormSubmit}>\r\n          SUBMIT\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import fetch from \"node-fetch\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport \"./registration.css\"\r\n\r\nconst Registration = ({ setToken }) => {\r\n  const [username, setUsername] = useState(\"\")\r\n  const [mail, setMail] = useState(\"\")\r\n  const [password, setPassoword] = useState(\"\")\r\n  const [isFormValid, setIsFormValid] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n\r\n  const history = useHistory()\r\n\r\n  const usernameInput = useRef()\r\n  const passwordInput = useRef()\r\n  const mailInput = useRef()\r\n  const validPassword = useRef(false)\r\n  const passwordHelper = useRef()\r\n  const validMail = useRef(false)\r\n  const mailHelper = useRef()\r\n  const validUsername = useRef(false)\r\n  const usernameHelper = useRef()\r\n\r\n  const submitButton = useRef()\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(\"/registration\", {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify({ username, mail, password })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.message) {\r\n          setMessage(data.message)\r\n        } else {\r\n          setToken(data.token)\r\n          history.push(\"\")\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      const regex = /^(?=.{3,14}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/\r\n      if (username.match(regex)) {\r\n        validUsername.current = true\r\n        usernameHelper.current.style.color = \"green\"\r\n        usernameInput.current.classList.remove(\"invalid\")\r\n        usernameInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        validUsername.current = false\r\n        usernameHelper.current.style.color = \"red\"\r\n        usernameInput.current.classList.remove(\"valid\")\r\n        usernameInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (mail) {\r\n      const regex = /^[^ ]+@[^ ]+\\.[a-z]{2,3}$/\r\n      if (mail.match(regex)) {\r\n        mailHelper.current.innerHTML = \"<i class='fas fa-info'></i> Valid email\"\r\n        mailHelper.current.style.color = \"green\"\r\n        validMail.current = true\r\n        mailInput.current.classList.remove(\"invalid\")\r\n        mailInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        mailHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> Invalid email\"\r\n        mailHelper.current.style.color = \"red\"\r\n        validMail.current = false\r\n        mailInput.current.classList.remove(\"valid\")\r\n        mailInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  }, [mail])\r\n\r\n  useEffect(() => {\r\n    if (password) {\r\n      const regex = /^[A-Za-z]\\w{5,13}$/\r\n      if (password.match(regex)) {\r\n        passwordHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> Valid password\"\r\n        passwordHelper.current.style.color = \"green\"\r\n        validPassword.current = true\r\n        passwordInput.current.classList.remove(\"invalid\")\r\n        passwordInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        passwordHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> 7 to 15 characters and the first must be a letter\"\r\n        passwordHelper.current.style.color = \"red\"\r\n        validPassword.current = false\r\n        passwordInput.current.classList.remove(\"valid\")\r\n        passwordInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  }, [password])\r\n\r\n  const checkFormValid = () => {\r\n    if (validUsername.current && validMail.current && validPassword.current) {\r\n      submitButton.current.disabled = false\r\n      submitButton.current.style.backgroundColor = \"white\"\r\n      submitButton.current.style.color = \"black\"\r\n      submitButton.current.classList = \"btn btn-abled\"\r\n      setIsFormValid(true)\r\n    } else {\r\n      submitButton.current.disabled = true\r\n      submitButton.current.style.backgroundColor = \"red\"\r\n      submitButton.current.classList = \"btn\"\r\n      setIsFormValid(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"registrationPage\">\r\n      <form onSubmit={onFormSubmit} className=\"form-registration\">\r\n        <a href=\"/\">\r\n          <img src=\"/img/dkLogo.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n        {message && (\r\n          <div className=\"alert alert-danger\" role=\"alert\">\r\n            {message}\r\n          </div>\r\n        )}\r\n        <h1 id=\"title\">Create account</h1>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            ref={usernameInput}\r\n            className=\"form-control\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            autoComplete=\"username\"\r\n          />\r\n          <small id=\"usernameHelp\" className=\"form-text\" ref={usernameHelper}>\r\n            <i className=\"fas fa-info\"></i> Letters between 4 and 15\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail\">Email address</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            id=\"mail\"\r\n            ref={mailInput}\r\n            name=\"mail\"\r\n            value={mail}\r\n            onChange={(e) => setMail(e.target.value)}\r\n            autoComplete=\"email\"\r\n          />\r\n          <small id=\"emailHelper\" className=\"form-text\" ref={mailHelper}>\r\n            <i className=\"fas fa-info\"></i> Insert a valid email\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            ref={passwordInput}\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassoword(e.target.value)}\r\n            autoComplete=\"new-password\"\r\n          />\r\n          <small id=\"passwordHelp\" ref={passwordHelper} className=\"form-text\">\r\n            <i className=\"fas fa-info\"></i> 7 to 15 characters and the first\r\n            must be a letter\r\n          </small>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn\"\r\n          ref={submitButton}\r\n          onClick={onFormSubmit}\r\n          disabled>\r\n          SUBMIT\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Registration\r\n","import React, { useEffect } from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre }) => {\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n  return (\r\n    <aside className=\"user-genres\">\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        <li key=\"0\" onClick={onGenreClick}>\r\n          All genres\r\n        </li>\r\n        {genres\r\n          .filter((genre) => genre !== currentGenre)\r\n          .map((genre, index) => (\r\n            <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n              {genre}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst UserCatalog = ({ films, currentGenre }) => {\r\n  return (\r\n    <article className=\"user-films\">\r\n      <div id=\"title\">\r\n        <h1>MOVIES YOU LIKED</h1>\r\n      </div>\r\n      <section id=\"favouriteFilms\">\r\n        {films\r\n          .filter((film) => film.Genre.includes(currentGenre))\r\n          .map((film, index) => {\r\n            return (\r\n              <div className=\"card\" key={index}>\r\n                <a href={`/film/${film.Title}`}>\r\n                  <img\r\n                    className=\"card-img-top\"\r\n                    src={film.Poster}\r\n                    alt=\"Cardcap\"\r\n                  />\r\n                </a>\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{film.Title}</h5>\r\n                  <p className=\"card-text\" id=\"rating\">\r\n                    {film.imdbRating} <i className=\"far fa-star\"></i>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n      </section>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default UserCatalog\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport UserSidebar from \"./UserSidebar.js\"\r\nimport \"./userCatalog.css\"\r\nimport UserCatalog from \"./UserCatalog.js\"\r\n\r\nconst UserFilms = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"\")\r\n  const genres = useRef()\r\n  const [isRendered, setIsRendered] = useState(false)\r\n  const films = useRef()\r\n  const clicked = useRef(false)\r\n  const allGenres = useRef()\r\n\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  const onButtonFilterClick = () => {\r\n    if (clicked.current) {\r\n      clicked.current = false\r\n      allGenres.current.style.display = \"none\"\r\n    } else {\r\n      clicked.current = true\r\n      allGenres.current.style.display = \"block\"\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (token !== \"\") {\r\n      fetch(`/user-data`, {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          Authorization: \"Bearer \" + token\r\n        }\r\n      })\r\n        .then((response) => response.json())\r\n        .then(({ userGenres, userFilms, auth }) => {\r\n          if (auth) {\r\n            genres.current = userGenres\r\n            films.current = userFilms\r\n            setIsRendered(true)\r\n          }\r\n        })\r\n    } \r\n  }, [token])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      {isRendered ? (\r\n        films.current.length > 0 ? (\r\n          <React.Fragment>\r\n            <div id=\"filterGenres\" onClick={onButtonFilterClick}>\r\n              <i className=\"fas fa-sort-down\"></i> Filter by genre{\" \"}\r\n              <i className=\"fas fa-sort-down\"></i>\r\n            </div>\r\n            <div id=\"allGenres\" ref={allGenres}>\r\n              <ul>\r\n                <li key=\"0\" onClick={onGenreClick}>\r\n                  All genres\r\n                </li>\r\n                {genres.current\r\n                  .filter((genre) => genre !== currentGenre)\r\n                  .map((genre, index) => (\r\n                    <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n                      {genre}\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n            <main>\r\n              <React.Fragment>\r\n                <UserSidebar\r\n                  genres={genres.current}\r\n                  currentGenre={currentGenre}\r\n                  setCurrentGenre={setCurrentGenre}\r\n                />\r\n                <UserCatalog\r\n                  films={films.current}\r\n                  currentGenre={currentGenre}\r\n                />\r\n              </React.Fragment>\r\n            </main>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div id=\"noFilm\">\r\n            <h1>\r\n              you haven't <span>voted</span> any movie yet.\r\n            </h1>\r\n          </div>\r\n        )\r\n      ) : (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )}\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default UserFilms\r\n","import React, { useEffect } from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre }) => {\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  return (\r\n    <aside className=\"user-genres\">\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        <li key=\"0\" onClick={onGenreClick}>\r\n          All\r\n        </li>\r\n        {genres\r\n          .map((genre, index) => (\r\n            <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n              {genre}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst UserCatalog = ({ films, currentGenre, username}) => {\r\n  return (\r\n    <article className=\"user-films\">\r\n      <div id=\"title\">\r\n        <h1>{currentGenre.toUpperCase()} MOVIES THAT {username.toUpperCase()} LIKED</h1>\r\n      </div>\r\n      <section id=\"favouriteFilms\">\r\n        {films\r\n          .filter((film) => film.Genre.includes(currentGenre))\r\n          .map((film, index) => {\r\n            return (\r\n              <div className=\"card\" key={index}>\r\n                <a href={`/film/${film.Title}`}>\r\n                  <img\r\n                    className=\"card-img-top\"\r\n                    src={film.Poster}\r\n                    alt=\"Cardcap\"\r\n                  />\r\n                </a>\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{film.Title}</h5>\r\n                  <p className=\"card-text\" id=\"rating\">\r\n                    {film.imdbRating} <i className=\"far fa-star\"></i>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n      </section>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default UserCatalog\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport UserSidebar from \"./SearchUserSidebar.js\"\r\nimport \"./searchUserCatalog.css\"\r\nimport UserCatalog from \"./SearchUserCatalog.js\"\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from \"chart.js\";\r\nimport { Doughnut } from \"react-chartjs-2\";\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\nconst data_graph = {\r\n  datasets: [{\r\n    label: 'Sample Data',\r\n    backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n    borderColor: 'rgba(75, 192, 192, 1)',\r\n    borderWidth: 1\r\n  }]\r\n};\r\n\r\nconst SearchUserFilms = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"\")\r\n  const genres = useRef()\r\n  const films = useRef()\r\n  const favoriteGenre = useRef()\r\n  const { userId } = useParams()\r\n  const clicked = useRef(false)\r\n  const allGenres = useRef()\r\n  const [username, setUsername] = useState('')\r\n  const [followed, setFollowed] = useState(false)\r\n  const [buttonText, setButtonText] = useState('Follow'); // Initial text\r\n  const [buttonColor, setButtonColor] = useState('#68beff');\r\n  const [followers, setFollowers] = useState({})\r\n  const [followings, setFollowings] = useState({})\r\n  const [viewFollowings, setViewFollowings] = useState('none')\r\n  const [viewFollowers, setViewFollowers] = useState('none')\r\n\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  const onButtonFilterClick = () => {\r\n    if (clicked.current) {\r\n      clicked.current = false\r\n      allGenres.current.style.display = \"none\"\r\n    } else {\r\n      clicked.current = true\r\n      allGenres.current.style.display = \"block\"\r\n    }\r\n  }\r\n\r\n  const checkFollow = () => {\r\n    const url = encodeURI(`/follow/${userId}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, followed}) => {\r\n        if (auth && followed) {\r\n          setFollowed(true)\r\n        }\r\n      })\r\n  }\r\n\r\n  const handleFollow = () => {\r\n    const url = encodeURI(`/${followed ? 'un' : ''}follow/${userId}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      method: \"PUT\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, status }) => {\r\n        if (auth && status) {\r\n          setFollowed(!followed)\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleConnections = () => {\r\n      const url = encodeURI(`/connections/${userId}`)\r\n      fetch(url)\r\n        .then((response) => {\r\n          return response.json()\r\n        })\r\n        .then(({followers, followings }) => {\r\n          setFollowings(followings)\r\n          setFollowers(followers)\r\n        })\r\n    }\r\n    const getFavoriteGenre = () => {\r\n      const allGenres = films.current.flatMap(movie => movie.Genre.split(',').map(genre => genre.trim()));\r\n      const genreCounts = allGenres.reduce((acc, genre) => {\r\n        acc[genre] = (acc[genre] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n      data_graph.labels=Object.keys(genreCounts)\r\n      data_graph.datasets[0].data = Object.keys(genreCounts).map(key => genreCounts[key])\r\n      console.log(data_graph.datasets[0].data)\r\n      const maxKey = Object.keys(genreCounts).reduce((res, cur) => {return genreCounts[res]>genreCounts[cur] ? res : cur})\r\n      return maxKey\r\n    }\r\n    const getUserData = () => {\r\n      fetch(`/search-user-data/${userId}`)\r\n        .then((response) => response.json())\r\n        .then(({ username, userGenres, userFilms}) => {\r\n          if(username!==''){\r\n            genres.current = userGenres\r\n            films.current = userFilms\r\n            favoriteGenre.current = films.current.length > 0 ? getFavoriteGenre() : 'None'\r\n            setUsername(username)\r\n          }\r\n        })\r\n    }\r\n    \r\n    getUserData()\r\n    handleConnections()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setButtonText(followed ? 'Unfollow' : 'Follow');\r\n    setButtonColor(followed ? '#ff9900' : '#68beff');\r\n  }, [followed])\r\n\r\n  useEffect(() => {\r\n    if(token){\r\n      checkFollow()\r\n    }\r\n  }, [token]) //because during the first load the navbar changes the token from ''\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      <div id=\"followings-div\" style={{display: viewFollowings}}></div>\r\n      \r\n        <div id='followings-div2' style={{display: viewFollowings}}>\r\n          <h3>Followings</h3>\r\n          <ul>\r\n            {Object.entries(followings).map(([key,value]) => {\r\n                return (\r\n                  <li key={key}>\r\n                    <a href={`/user-search/${key}`}>\r\n                    <p>{value}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                    </a>\r\n                  </li>\r\n                )\r\n            })}\r\n          </ul>\r\n          <i onClick={()=>{setViewFollowings('none')}} class=\"fa-solid fa-xmark\"></i>\r\n        </div>\r\n        <div id=\"followings-div\" style={{display: viewFollowers}}></div>\r\n      \r\n        <div id='followings-div2' style={{display: viewFollowers}}>\r\n          <h3>Followers</h3>\r\n          <ul>\r\n            {Object.entries(followers).map(([key,value]) => {\r\n                return (\r\n                  <li key={key}>\r\n                    <a href={`/user-search/${key}`}>\r\n                    <p>{value}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                    </a>\r\n                  </li>\r\n                )\r\n            })}\r\n          </ul>\r\n          <i onClick={()=>{setViewFollowers('none')}} class=\"fa-solid fa-xmark\"></i>\r\n        </div>\r\n      {username !== '' ? (\r\n        <div id='searched-user'>\r\n          <div id='user-info-wrapper'>\r\n            <div id='user-info'>\r\n              <div id='username-div'>@{username}</div>\r\n              <div className=\"other clickable\" onClick={()=>{setViewFollowers('block')}}>FOLLOWERS: {Object.keys(followers).length}</div>\r\n              <div className=\"other clickable\" onClick={()=>{setViewFollowings('block')}}>FOLLOWINGS: {Object.keys(followings).length}</div>\r\n              <div className=\"other\">FAVORITE GENRE: {favoriteGenre.current}</div>\r\n              {token && (\r\n                <div id=\"follow-button\" style={{color: buttonColor, borderColor: buttonColor}} onClick={() => {handleFollow()}}>\r\n                  {buttonText}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        {films.current.length > 0 ? (\r\n          <React.Fragment>\r\n            <div id=\"filterGenres\" onClick={onButtonFilterClick}>\r\n              <i className=\"fas fa-sort-down\"></i> Filter by genre{\" \"}\r\n              <i className=\"fas fa-sort-down\"></i>\r\n            </div>\r\n            <div id=\"allGenres\" ref={allGenres}>\r\n              <ul>\r\n                <li key=\"0\" onClick={onGenreClick}>\r\n                  All genres\r\n                </li>\r\n                {genres.current\r\n                  .filter((genre) => genre !== currentGenre)\r\n                  .map((genre, index) => (\r\n                    <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n                      {genre}\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n            <main>\r\n              <React.Fragment>\r\n                <UserSidebar\r\n                  genres={genres.current}\r\n                  currentGenre={currentGenre}\r\n                  setCurrentGenre={setCurrentGenre}\r\n                />\r\n                <UserCatalog\r\n                  films={films.current}\r\n                  currentGenre={currentGenre}\r\n                  username = {username}\r\n                />\r\n              </React.Fragment>\r\n            </main>\r\n            <div className=\"chart-container\" style={{ width: '40rem', margin: '25vh auto' }}>\r\n        <Doughnut data={data_graph} />\r\n      </div>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div id=\"noFilm\">\r\n            <h1>\r\n              They haven't <span>voted</span> any movie yet.\r\n            </h1>\r\n          </div>\r\n        )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )}\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SearchUserFilms\r\n","import React from \"react\"\r\nimport \"./page404.css\"\r\nconst Page404 = () => {\r\n  return (\r\n    <div className=\"body-error404\">\r\n      <div className=\"div-error404\">\r\n        <a href=\"/\">\r\n          <img src=\"/img/logo2.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n        <h1>\r\n          <i class=\"fas fa-exclamation-triangle\"></i> ERROR 404{\" \"}\r\n          <i class=\"fas fa-exclamation-triangle\"></i> <br /> PAGE NOT FOUND{\" \"}\r\n        </h1>\r\n        <a href=\"/\" id=\"homepageLink\">\r\n          <i class=\"fas fa-home\"></i> BACK TO HOME PAGE{\" \"}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Page404\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\nimport Home from \"./components/Homepage/Home.js\"\r\nimport SearchedFilm from \"./components/Film/SearchedFilm.js\"\r\nimport Login from \"./components/Login/Login.js\"\r\nimport Registration from \"./components/Registration/Registration.js\"\r\nimport UserMenu from \"./components/User/UserMenu.js\"\r\nimport SearchUserMenu from './components/UserSearch/SearchUserMenu.js'\r\nimport Page404 from \"./components/404Page/Page404.js\"\r\nimport \"./components/Homepage/index.css\"\r\nconst App = () => {\r\n  const getCookie = (cname) => {\r\n    const name = cname + \"=\"\r\n    const decodedCookie = decodeURIComponent(document.cookie)\r\n    const ca = decodedCookie.split(\";\")\r\n    for (let i = 0; i < ca.length; i++) {\r\n      let c = ca[i]\r\n      while (c.charAt(0) === \" \") {\r\n        c = c.substring(1)\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length)\r\n      }\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const [token, setToken] = useState(\"\")\r\n  useEffect(() => {\r\n    setToken(getCookie(\"jwt\"))\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/film/:title\">\r\n            <SearchedFilm token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/user-search/:userId\">\r\n            <SearchUserMenu token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/profile\">\r\n            <UserMenu token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/login\">\r\n            <Login setToken={setToken} />\r\n          </Route>\r\n          <Route exact path=\"/registration\">\r\n            <Registration setToken={setToken} />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Home token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Page404 />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./App\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}