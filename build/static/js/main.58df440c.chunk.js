(this.webpackJsonpbassadefinizione=this.webpackJsonpbassadefinizione||[]).push([[0],{46:function(e,t,s){},66:function(e,t,s){},74:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){"use strict";s.r(t);var c=s(1),r=s.n(c),n=s(52),a=s.n(n),i=s(18),l=s(7),j=s(0);var d=e=>{let{genres:t,currentGenre:s,setCurrentGenre:c,setIsRendered:r}=e;return Object(j.jsxs)("aside",{children:[Object(j.jsx)("div",{id:"genresLegend",children:Object(j.jsx)("h1",{children:"GENRES"})}),Object(j.jsx)("ul",{children:t.filter((e=>e.name!==s)).map(((e,t)=>Object(j.jsx)("li",{onClick:e=>{c(e.target.innerText),r(!1)},children:Object(j.jsx)("span",{children:Object(j.jsx)("span",{children:Object(j.jsx)("span",{children:e.name})})})},t)))})]})};var o=e=>{let{film:t}=e;return Object(j.jsxs)("li",{className:"card",children:[Object(j.jsx)("a",{href:"/film/".concat(t.Title),children:Object(j.jsx)("img",{className:"card-img-top",src:t.Poster,alt:"Cardcap"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:t.Title}),Object(j.jsx)("hr",{}),Object(j.jsx)("p",{className:"card-text",id:"plot",children:t.Plot}),Object(j.jsx)("h6",{className:"card-label",children:"GENRE"}),Object(j.jsx)("p",{className:"card-text",id:"filmGenre",children:t.Genre}),Object(j.jsx)("h6",{className:"card-label",children:"IMDB RATING"}),Object(j.jsxs)("p",{className:"card-text",children:[t.imdbRating,Object(j.jsx)("i",{className:"far fa-star"})," | ",t.imdbVotes,Object(j.jsx)("i",{className:"fas fa-vote-yea"})]})]})]})};s(66);var b=e=>{let{pagesNumber:t,onPageClick:s,currentPage:c}=e;const r=()=>{const e=[];for(let r=0;r<t;r++)e.push(Object(j.jsx)("li",{className:+c===r?"active page-item":"page-item","data-page":r,onClick:s,children:r+1},r));return e};return Object(j.jsxs)("ul",{className:"pagination justify-content-center",children:[+c>0?Object(j.jsx)("li",{"data-page":+c-1,onClick:s,className:"page-item",children:Object(j.jsx)("i",{className:"fas fa-angle-double-left"})}):null,Object(j.jsx)(r,{}),+c+1<t?Object(j.jsx)("li",{"data-page":+c+1,onClick:s,className:"page-item",children:Object(j.jsx)("i",{className:"fas fa-angle-double-right"})}):null]})};var h=e=>{let{currentGenre:t,genres:s,setCurrentGenre:n,isRendered:a,setIsRendered:i}=e;const l=Object(c.useRef)(),d=Object(c.useRef)(),h=Object(c.useRef)(),O=Object(c.useRef)(),u=Object(c.useRef)([]),x=Object(c.useRef)(0),m=Object(c.useRef)(),f=Object(c.useRef)(),p=()=>{fetch("/films?genre=".concat(t,"&page=").concat(x.current),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>e.json())).then((e=>{let{listOfFilms:t}=e;u.current=t,i(!0)}))};Object(c.useEffect)((()=>{x.current=0,p()}),[t]),Object(c.useEffect)((()=>{fetch("/pagination?genre=".concat(t)).then((e=>e.json())).then((e=>{let{pagesLength:t}=e;return m.current=Math.ceil(t/10)}))}));const g=e=>{i(!1),x.current=isNaN(e.target.dataset.page)?0:e.target.dataset.page,p()},v=()=>{"none"!==d.current.style.display?(d.current.style.display="none",f.current.style.display="none",h.current.style.display="grid",O.current.innerHTML="Choose the genre"):(d.current.style.display="grid",f.current.style.display="block",h.current.style.display="none",O.current.innerHTML=t)},N=()=>a?Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)("article",{id:"articleFilms",ref:d,children:u.current.map((e=>Object(j.jsx)(o,{film:e},e.imdbID)))}),Object(j.jsx)("nav",{ref:f,children:m.current>1?Object(j.jsx)(b,{onPageClick:g,pagesNumber:m.current,currentPage:x.current}):null})]}):Object(j.jsxs)("div",{className:"lds-ellipsis",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]});return Object(j.jsxs)("section",{children:[Object(j.jsx)("div",{className:"module-border-wrap",children:Object(j.jsxs)("div",{id:"slogan",children:[Object(j.jsx)("img",{src:"/img/logo.jpg",alt:"logo"}),Object(j.jsx)("h2",{children:"Search. Vote. Save."}),Object(j.jsx)("h1",{children:"ANY MOVIE IN YOUR MIND"})]})}),Object(j.jsxs)("div",{className:"genre",id:t,children:[Object(j.jsx)("h1",{id:"currentGenre",ref:O,children:t}),Object(j.jsx)("i",{id:"changeGenre",ref:l,onClick:v,className:"fas fa-exchange-alt"})]}),Object(j.jsx)(N,{}),Object(j.jsx)("article",{id:"articleGenres",ref:h,children:Object(j.jsx)("ul",{children:s.filter((e=>e.name!==t)).map((e=>Object(j.jsx)("li",{onClick:e=>{n(e.target.innerText),i(!1),v()},children:Object(j.jsx)("span",{children:Object(j.jsx)("span",{children:Object(j.jsx)("span",{children:e.name})})})},e.id)))})})]})},O=s(13),u=s.n(O);var x=e=>{let{token:t,setToken:s}=e;const r=Object(c.useRef)(),n=Object(c.useRef)(),a=Object(l.f)(),[i,d]=Object(c.useState)(""),[o,b]=Object(c.useState)([]),[h,O]=Object(c.useState)(""),x=Object(c.useRef)(),[m,f]=Object(c.useState)(!0),[p,g]=Object(c.useState)(!1),v=e=>{m!==e&&(d(""),b([]),f(e))},N=()=>{r.current.href="/login",r.current.innerHTML="<i class='fa fa-user'></i> GET STARTED",r.current.style["border-radius"]="10px",n.current.style.display="none"},y=()=>{""!==t?u()("/token",{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+t},method:"POST"}).then((e=>e.json())).then((e=>{const{username:t,auth:s}=e;s?(e=>{O(e),r.current.href="/profile",r.current.innerHTML='<i class="fa fa-user"></i> '.concat(e),r.current.style["border-radius"]="10px 0 0 10px",n.current.style.display="inline"})(t):N()})).catch((()=>{N()})):N()};return Object(c.useEffect)((()=>{const e=e=>{x.current&&!x.current.contains(e.target)?g(!1):g(!0)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),Object(c.useEffect)((()=>{y()}),[t]),Object(c.useEffect)((()=>{const e=setTimeout((()=>{i&&(m?u()("/search-movie?s=".concat(i)).then((e=>e.json())).then((e=>{e.Response?(g(!0),b(e.Search)):b([])})).catch((()=>{b([])})):u()("/search-user?s=".concat(i)).then((e=>e.json())).then((e=>{g(!0),b(e)})).catch((()=>{b([])})))}),300);return()=>{clearTimeout(e)}}),[i]),Object(j.jsxs)("header",{children:[Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:"/img/dkLogo.jpg",alt:"",className:"logo"})}),Object(j.jsxs)("form",{id:"searchFilm",className:m?"searchFilm":"searchUsers",ref:x,onSubmit:e=>{e.preventDefault()},children:[Object(j.jsx)("input",{className:"input-field",spellCheck:"false",autoComplete:"off",type:"text",value:i,onChange:e=>d(e.target.value),id:"inputFilm",name:"title",placeholder:m?"Search for a movie...":"Search for a user..."}),Object(j.jsxs)("div",{id:"suggestions",children:[(0===i.length||void 0===o||!1===p)&&Object(j.jsx)("span",{}),i.length>0&&void 0!==o&&!0===p&&!0===m&&Object(j.jsx)("ul",{children:o.map(((e,t)=>Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"/film/".concat(e.Title),children:[Object(j.jsx)("p",{children:e.Title})," ",Object(j.jsx)("i",{className:"fa-solid fa-arrow-right"})]})},t)))}),i.length>0&&void 0!==o&&!0===p&&!1===m&&Object(j.jsx)("ul",{children:o.map(((e,t)=>{let{username:s,id:c}=e;if(h!==s)return Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"/user-search/".concat(c),children:[Object(j.jsx)("p",{children:s})," ",Object(j.jsx)("i",{className:"fa-solid fa-arrow-right"})]})},t)}))})]}),Object(j.jsxs)("div",{id:"changeSearch",children:[Object(j.jsx)("i",{className:"fa-solid fa-film",style:{opacity:m?1:.3},id:"movieIcon",onClick:()=>v(!0)}),Object(j.jsx)("i",{className:"fa-solid fa-users",style:{opacity:m?.3:1},id:"usersIcon",onClick:()=>v(!1)})]})]}),Object(j.jsxs)("div",{id:"userInteraction",children:[Object(j.jsxs)("a",{href:"/login",id:"button-user",ref:r,children:[Object(j.jsx)("i",{className:"fa-solid fa-user"})," GET STARTED"]}),Object(j.jsxs)("button",{id:"button-logout",ref:n,onClick:()=>{document.cookie="jwt=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",s(""),a.push("/")},children:[Object(j.jsx)("i",{className:"fa-solid fa-sign-out-alt"})," LOGOUT"]})]})]})};var m=()=>Object(j.jsxs)("footer",{className:"page-footer font-small special-color-dark pt-4",children:[Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("ul",{className:"list-unstyled list-inline text-center",children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("a",{href:"https://www.facebook.com/profile.php?id=100010848486989",className:"btn-floating fa-lg fa-2x",children:Object(j.jsx)("i",{className:"fa-brands fa-facebook-f"})})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("a",{href:"https://www.instagram.com/matteo.mrl",className:"btn-floating fa-lg fa-2x",children:Object(j.jsx)("i",{className:"fa-brands fa-instagram"})})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("a",{href:"https://www.linkedin.com/in/matteo-morellini-306a331a8/",className:"btn-floating fa-lg fa-2x",children:Object(j.jsx)("i",{className:"fa-brands fa-linkedin"})})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("a",{href:"https://github.com/MatteoMorellini",className:"btn-floating fa-lg fa-2x",children:Object(j.jsx)("i",{className:"fa-brands fa-github"})})})]})}),Object(j.jsx)("div",{className:"footer-copyright text-center py-3",children:"Created with passion by Matteo Morellini."})]});s(46);var f=e=>{let{token:t,setToken:s}=e;const[n,a]=Object(c.useState)("Action"),i=Object(c.useRef)([]),[l,o]=Object(c.useState)();return Object(c.useEffect)((()=>{fetch("/genres").then((e=>e.json())).then((e=>{i.current=e,i.current.sort(((e,t)=>e.name.localeCompare(t.name)))}))}),[]),Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(x,{token:t,setToken:s}),Object(j.jsxs)("main",{className:"main-homepage",children:[Object(j.jsx)(d,{genres:i.current,currentGenre:n,setCurrentGenre:a,setIsRendered:o}),Object(j.jsx)(h,{currentGenre:n,setCurrentGenre:a,genres:i.current,setIsRendered:o,isRendered:l})]}),Object(j.jsx)(m,{})]})},p=(s(74),s(104)),g=s(54),v=s.n(g);var N=e=>{let{token:t,setToken:s}=e;const[n,a]=Object(c.useState)(),[i,d]=Object(c.useState)(!1),{title:o}=Object(l.g)(),b=Object(c.useRef)(),[h,O]=Object(c.useState)(!1),[f,g]=Object(c.useState)(0);Object(c.useEffect)((()=>{const e=encodeURI("/film-data/".concat(o));u()(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((e=>e.json())).then((e=>{let{data:t,found:s}=e;s&&a(t),d(!0)}))}),[]);return Object(c.useEffect)((()=>{t&&(u()("/vote",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({title:o}),method:"POST"}).then((e=>e.json())).then((e=>{let{auth:t,voted:s}=e;t&&s&&g(s)})),(()=>{const e=encodeURI("/film-like/".concat(o));u()(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((e=>e.json())).then((e=>{let{auth:t,likes:s}=e;O(t&&s?s:[])}))})())}),[t]),i?Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(x,{token:t,setToken:s}),void 0!==n?Object(j.jsxs)("section",{id:"specificFilm",ref:b,children:[Object(j.jsx)("img",{src:n.Poster,alt:""}),Object(j.jsxs)("div",{id:"filmInformation",children:[Object(j.jsx)("h1",{id:"title",children:n.Title}),Object(j.jsx)("h5",{id:"plot",children:n.Plot}),Object(j.jsx)("h5",{id:"genre",children:n.Genre}),Object(j.jsx)("h5",{id:"runtime",children:n.Runtime}),Object(j.jsx)("h5",{id:"released",children:n.Released}),Object(j.jsxs)("h5",{id:"director",children:["Director: ",n.Director]}),Object(j.jsxs)("h5",{id:"actors",children:["Actors: ",n.Actors]}),Object(j.jsx)("h5",{id:"awards",children:n.Awards}),Object(j.jsxs)("h5",{id:"imdbRating",children:[n.imdbRating," ",Object(j.jsx)("i",{className:"far fa-star"})," |"," ",n.imdbVotes," ",Object(j.jsx)("i",{className:"fas fa-vote-yea"})," IMDb ratings"]}),!1!==h&&Object(j.jsxs)("div",{id:"friendsLike",children:[h.length>0&&Object(j.jsxs)("h5",{children:["People you follow that liked this movie: ",h.map(((e,t)=>{let[s,c]=e;return Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)("a",{href:"/user-search/".concat(s),children:c}),t<h.length-1&&", "]},t)}))]}),0===h.length&&Object(j.jsx)("h5",{children:"None of the people you follow liked this movie yet"})]}),t&&Object(j.jsx)("div",{children:Object(j.jsxs)("div",{id:"vote",children:[Object(j.jsx)("h5",{id:"textRating",children:"Rate the film"}),Object(j.jsx)(p.a,{name:"rating",onChange:(e,s)=>{return c=s,void u()("/vote",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({title:o,rating:c}),method:"PUT"}).then((e=>e.json())).then((e=>{let{auth:t,vote:s}=e;t&&s&&g(c)}));var c},value:f,precision:1,emptyIcon:Object(j.jsx)(v.a,{sx:{stroke:"#f4a704",strokeWidth:1},color:"auction",fontSize:"inherit"})})]})})]})]}):Object(j.jsx)("div",{id:"filmNotFound",children:Object(j.jsxs)("h1",{children:["FILM ",Object(j.jsx)("span",{children:"NOT FOUND"})," TRY ANOTHER NAME"]})}),Object(j.jsx)(m,{})]}):Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(x,{token:t}),Object(j.jsxs)("div",{className:"lds-ellipsis",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]})," ",Object(j.jsx)(m,{})]})};s(78);var y=e=>{let{setToken:t}=e;const[s,r]=Object(c.useState)(),[n,a]=Object(c.useState)(""),[i,d]=Object(c.useState)(""),o=Object(l.f)(),b=e=>{e.preventDefault(),n.length>0&&i.length>0&&u()("/login",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:n,password:i})}).then((e=>e.json())).then((e=>{e.message?r(e.message):(t(e.token),o.push("/"))}))};return Object(j.jsx)("div",{id:"loginPage",children:Object(j.jsxs)("form",{id:"loginForm",onSubmit:b,children:[Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:"/img/dkLogo.jpg",id:"imgLogo",alt:""})}),void 0===s?Object(j.jsx)("h1",{id:"title",children:"Log in"}):Object(j.jsx)("div",{className:"alert alert-danger",role:"alert",children:s}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Username"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",value:n,spellCheck:"false",onChange:e=>a(e.target.value),autoComplete:"username"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:i,onChange:e=>{d(e.target.value)},autoComplete:"new-password"})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("a",{id:"registrationLink",href:"/registration",children:"Do not have an account? Create it now"})}),Object(j.jsx)("button",{className:"btn",onClick:b,children:"SUBMIT"})]})})};s(79);var k=e=>{let{setToken:t}=e;const[s,r]=Object(c.useState)(""),[n,a]=Object(c.useState)(""),[i,d]=Object(c.useState)(""),[o,b]=Object(c.useState)(!1),[h,O]=Object(c.useState)(""),x=Object(l.f)(),m=Object(c.useRef)(),f=Object(c.useRef)(),p=Object(c.useRef)(),g=Object(c.useRef)(!1),v=Object(c.useRef)(),N=Object(c.useRef)(!1),y=Object(c.useRef)(),k=Object(c.useRef)(!1),C=Object(c.useRef)(),w=Object(c.useRef)(),T=e=>{e.preventDefault(),u()("/registration",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:s,mail:n,password:i})}).then((e=>e.json())).then((e=>{e.message?O(e.message):(t(e.token),x.push(""))}))};Object(c.useEffect)((()=>{if(s){const e=/^(?=.{3,14}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/;s.match(e)?(k.current=!0,C.current.style.color="green",m.current.classList.remove("invalid"),m.current.classList.add("valid"),R()):(k.current=!1,C.current.style.color="red",m.current.classList.remove("valid"),m.current.classList.add("invalid"))}})),Object(c.useEffect)((()=>{if(n){const e=/^[^ ]+@[^ ]+\.[a-z]{2,3}$/;n.match(e)?(y.current.innerHTML="<i class='fas fa-info'></i> Valid email",y.current.style.color="green",N.current=!0,p.current.classList.remove("invalid"),p.current.classList.add("valid"),R()):(y.current.innerHTML="<i class='fas fa-info'></i> Invalid email",y.current.style.color="red",N.current=!1,p.current.classList.remove("valid"),p.current.classList.add("invalid"))}}),[n]),Object(c.useEffect)((()=>{if(i){const e=/^[A-Za-z]\w{5,13}$/;i.match(e)?(v.current.innerHTML="<i class='fas fa-info'></i> Valid password",v.current.style.color="green",g.current=!0,f.current.classList.remove("invalid"),f.current.classList.add("valid"),R()):(v.current.innerHTML="<i class='fas fa-info'></i> 7 to 15 characters and the first must be a letter",v.current.style.color="red",g.current=!1,f.current.classList.remove("valid"),f.current.classList.add("invalid"))}}),[i]);const R=()=>{k.current&&N.current&&g.current?(w.current.disabled=!1,w.current.style.backgroundColor="white",w.current.style.color="black",w.current.classList="btn btn-abled",b(!0)):(w.current.disabled=!0,w.current.style.backgroundColor="red",w.current.classList="btn",b(!1))};return Object(j.jsx)("div",{id:"registrationPage",children:Object(j.jsxs)("form",{onSubmit:T,className:"form-registration",children:[Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:"/img/dkLogo.jpg",id:"imgLogo",alt:""})}),h&&Object(j.jsx)("div",{className:"alert alert-danger",role:"alert",children:h}),Object(j.jsx)("h1",{id:"title",children:"Create account"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Username"}),Object(j.jsx)("input",{type:"text",ref:m,className:"form-control",id:"username",name:"username",value:s,onChange:e=>r(e.target.value),autoComplete:"username"}),Object(j.jsxs)("small",{id:"usernameHelp",className:"form-text",ref:C,children:[Object(j.jsx)("i",{className:"fas fa-info"})," Letters between 4 and 15"]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"mail",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"mail",ref:p,name:"mail",value:n,onChange:e=>a(e.target.value),autoComplete:"email"}),Object(j.jsxs)("small",{id:"emailHelper",className:"form-text",ref:y,children:[Object(j.jsx)("i",{className:"fas fa-info"})," Insert a valid email"]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",ref:f,id:"password",name:"password",value:i,onChange:e=>d(e.target.value),autoComplete:"new-password"}),Object(j.jsxs)("small",{id:"passwordHelp",ref:v,className:"form-text",children:[Object(j.jsx)("i",{className:"fas fa-info"})," 7 to 15 characters and the first must be a letter"]})]}),Object(j.jsx)("button",{type:"submit",className:"btn",ref:w,onClick:T,disabled:!0,children:"SUBMIT"})]})})};var C=e=>{let{genres:t,currentGenre:s,setCurrentGenre:c}=e;const r=e=>{c(e.target.id)};return Object(j.jsxs)("aside",{className:"user-genres",children:[Object(j.jsx)("div",{id:"genresLegend",children:Object(j.jsx)("h1",{children:"GENRES"})}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{onClick:r,children:"All genres"},"0"),t.filter((e=>e!==s)).map(((e,t)=>Object(j.jsx)("li",{id:e,onClick:r,children:e},t+1)))]})]})};s(80);var w=e=>{let{films:t,currentGenre:s}=e;return Object(j.jsxs)("article",{className:"user-films",children:[Object(j.jsx)("div",{id:"title",children:Object(j.jsx)("h1",{children:"MOVIES YOU LIKED"})}),Object(j.jsx)("section",{id:"favouriteFilms",children:t.filter((e=>e.Genre.includes(s))).map(((e,t)=>Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("a",{href:"/film/".concat(e.Title),children:Object(j.jsx)("img",{className:"card-img-top",src:e.Poster,alt:"Cardcap"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:e.Title}),Object(j.jsxs)("p",{className:"card-text",id:"rating",children:[e.imdbRating," ",Object(j.jsx)("i",{className:"far fa-star"})]})]})]},t)))})]})};var T=e=>{let{token:t,setToken:s}=e;const[n,a]=Object(c.useState)(""),i=Object(c.useRef)(),[l,d]=Object(c.useState)(!1),o=Object(c.useRef)(),b=Object(c.useRef)(!1),h=Object(c.useRef)(),O=e=>{a(e.target.id)};return Object(c.useEffect)((()=>{""!==t&&fetch("/user-data",{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+t}}).then((e=>e.json())).then((e=>{let{userGenres:t,userFilms:s,auth:c}=e;c&&(i.current=t,o.current=s,d(!0))}))}),[t]),Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(x,{token:t,setToken:s}),l?o.current.length>0?Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsxs)("div",{id:"filterGenres",onClick:()=>{b.current?(b.current=!1,h.current.style.display="none"):(b.current=!0,h.current.style.display="block")},children:[Object(j.jsx)("i",{className:"fas fa-sort-down"})," Filter by genre"," ",Object(j.jsx)("i",{className:"fas fa-sort-down"})]}),Object(j.jsx)("div",{id:"allGenres",ref:h,children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{onClick:O,children:"All genres"},"0"),i.current.filter((e=>e!==n)).map(((e,t)=>Object(j.jsx)("li",{id:e,onClick:O,children:e},t+1)))]})}),Object(j.jsx)("main",{children:Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(C,{genres:i.current,currentGenre:n,setCurrentGenre:a}),Object(j.jsx)(w,{films:o.current,currentGenre:n})]})})]}):Object(j.jsx)("div",{id:"noFilm",children:Object(j.jsxs)("h1",{children:["you haven't ",Object(j.jsx)("span",{children:"voted"})," any movie yet."]})}):Object(j.jsxs)("div",{className:"lds-ellipsis",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]}),Object(j.jsx)(m,{})]})};var R=e=>{let{genres:t,currentGenre:s,setCurrentGenre:c}=e;const r=e=>{c(e.target.id)};return Object(j.jsxs)("aside",{className:"user-genres",children:[Object(j.jsx)("div",{id:"genresLegend",children:Object(j.jsx)("h1",{children:"GENRES"})}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{onClick:r,children:"All"},"0"),t.map(((e,t)=>Object(j.jsx)("li",{id:e,onClick:r,children:e},t+1)))]})]})};s(81);var S=e=>{let{films:t,currentGenre:s,username:c}=e;return Object(j.jsxs)("article",{className:"user-films",children:[Object(j.jsx)("div",{id:"title",children:Object(j.jsxs)("h1",{children:[s.toUpperCase()," MOVIES THAT ",c.toUpperCase()," LIKED"]})}),Object(j.jsx)("section",{id:"favouriteFilms",children:t.filter((e=>e.Genre.includes(s))).map(((e,t)=>Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("a",{href:"/film/".concat(e.Title),children:Object(j.jsx)("img",{className:"card-img-top",src:e.Poster,alt:"Cardcap"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:e.Title}),Object(j.jsxs)("p",{className:"card-text",id:"rating",children:[e.imdbRating," ",Object(j.jsx)("i",{className:"far fa-star"})]})]})]},t)))})]})},G=s(10),E=s(55);G.d.register(G.a,G.l,G.f);const L={datasets:[{label:"Sample Data",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};var F=e=>{let{token:t,setToken:s}=e;const[n,a]=Object(c.useState)(""),i=Object(c.useRef)(),d=Object(c.useRef)(),o=Object(c.useRef)(),{userId:b}=Object(l.g)(),h=Object(c.useRef)(!1),O=Object(c.useRef)(),[u,f]=Object(c.useState)(""),[p,g]=Object(c.useState)(!1),[v,N]=Object(c.useState)("Follow"),[y,k]=Object(c.useState)("#68beff"),[C,w]=Object(c.useState)({}),[T,G]=Object(c.useState)({}),[F,I]=Object(c.useState)("none"),[A,M]=Object(c.useState)("none"),P=e=>{a(e.target.id)};return Object(c.useEffect)((()=>{fetch("/search-user-data/".concat(b)).then((e=>e.json())).then((e=>{let{username:t,userGenres:s,userFilms:c}=e;""!==t&&(i.current=s,d.current=c,o.current=d.current.length>0?(()=>{const e=d.current.flatMap((e=>e.Genre.split(",").map((e=>e.trim())))).reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{});return L.labels=Object.keys(e),L.datasets[0].data=Object.keys(e).map((t=>e[t])),console.log(L.datasets[0].data),Object.keys(e).reduce(((t,s)=>e[t]>e[s]?t:s))})():"None",f(t))})),(()=>{const e=encodeURI("/connections/".concat(b));fetch(e).then((e=>e.json())).then((e=>{let{followers:t,followings:s}=e;G(s),w(t)}))})()}),[]),Object(c.useEffect)((()=>{N(p?"Unfollow":"Follow"),k(p?"#ff9900":"#68beff")}),[p]),Object(c.useEffect)((()=>{t&&(()=>{const e=encodeURI("/follow/".concat(b));fetch(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((e=>e.json())).then((e=>{let{auth:t,followed:s}=e;t&&s&&g(!0)}))})()}),[t]),Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(x,{token:t,setToken:s}),Object(j.jsx)("div",{id:"followings-div",style:{display:F}}),Object(j.jsxs)("div",{id:"followings-div2",style:{display:F},children:[Object(j.jsx)("h3",{children:"Followings"}),Object(j.jsx)("ul",{children:Object.entries(T).map((e=>{let[t,s]=e;return Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"/user-search/".concat(t),children:[Object(j.jsx)("p",{children:s})," ",Object(j.jsx)("i",{className:"fa-solid fa-arrow-right"})]})},t)}))}),Object(j.jsx)("i",{onClick:()=>{I("none")},class:"fa-solid fa-xmark"})]}),Object(j.jsx)("div",{id:"followings-div",style:{display:A}}),Object(j.jsxs)("div",{id:"followings-div2",style:{display:A},children:[Object(j.jsx)("h3",{children:"Followers"}),Object(j.jsx)("ul",{children:Object.entries(C).map((e=>{let[t,s]=e;return Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"/user-search/".concat(t),children:[Object(j.jsx)("p",{children:s})," ",Object(j.jsx)("i",{className:"fa-solid fa-arrow-right"})]})},t)}))}),Object(j.jsx)("i",{onClick:()=>{M("none")},class:"fa-solid fa-xmark"})]}),""!==u?Object(j.jsxs)("div",{id:"searched-user",children:[Object(j.jsx)("div",{id:"user-info-wrapper",children:Object(j.jsxs)("div",{id:"user-info",children:[Object(j.jsxs)("div",{id:"username-div",children:["@",u]}),Object(j.jsxs)("div",{className:"other clickable",onClick:()=>{M("block")},children:["FOLLOWERS: ",Object.keys(C).length]}),Object(j.jsxs)("div",{className:"other clickable",onClick:()=>{I("block")},children:["FOLLOWINGS: ",Object.keys(T).length]}),Object(j.jsxs)("div",{className:"other",children:["FAVORITE GENRE: ",o.current]}),t&&Object(j.jsx)("div",{id:"follow-button",style:{color:y,borderColor:y},onClick:()=>{(()=>{const e=encodeURI("/".concat(p?"un":"","follow/").concat(b));fetch(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},method:"PUT"}).then((e=>e.json())).then((e=>{let{auth:t,status:s}=e;t&&s&&g(!p)}))})()},children:v})]})}),d.current.length>0?Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsxs)("div",{id:"filterGenres",onClick:()=>{h.current?(h.current=!1,O.current.style.display="none"):(h.current=!0,O.current.style.display="block")},children:[Object(j.jsx)("i",{className:"fas fa-sort-down"})," Filter by genre"," ",Object(j.jsx)("i",{className:"fas fa-sort-down"})]}),Object(j.jsx)("div",{id:"allGenres",ref:O,children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{onClick:P,children:"All genres"},"0"),i.current.filter((e=>e!==n)).map(((e,t)=>Object(j.jsx)("li",{id:e,onClick:P,children:e},t+1)))]})}),Object(j.jsx)("main",{children:Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(R,{genres:i.current,currentGenre:n,setCurrentGenre:a}),Object(j.jsx)(S,{films:d.current,currentGenre:n,username:u})]})}),Object(j.jsx)("div",{className:"chart-container",style:{width:"40rem",margin:"25vh auto"},children:Object(j.jsx)(E.a,{data:L})})]}):Object(j.jsx)("div",{id:"noFilm",children:Object(j.jsxs)("h1",{children:["They haven't ",Object(j.jsx)("span",{children:"voted"})," any movie yet."]})})]}):Object(j.jsxs)("div",{className:"lds-ellipsis",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]}),Object(j.jsx)(m,{})]})};s(82);var I=()=>Object(j.jsx)("div",{className:"body-error404",children:Object(j.jsxs)("div",{className:"div-error404",children:[Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:"/img/logo2.jpg",id:"imgLogo",alt:""})}),Object(j.jsxs)("h1",{children:[Object(j.jsx)("i",{class:"fas fa-exclamation-triangle"})," ERROR 404"," ",Object(j.jsx)("i",{class:"fas fa-exclamation-triangle"})," ",Object(j.jsx)("br",{})," PAGE NOT FOUND"," "]}),Object(j.jsxs)("a",{href:"/",id:"homepageLink",children:[Object(j.jsx)("i",{class:"fas fa-home"})," BACK TO HOME PAGE"," "]})]})});var A=()=>{const[e,t]=Object(c.useState)("");return Object(c.useEffect)((()=>{t((e=>{const t=e+"=",s=decodeURIComponent(document.cookie).split(";");for(let c=0;c<s.length;c++){let e=s[c];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return""})("jwt"))}),[]),Object(j.jsx)(r.a.Fragment,{children:Object(j.jsx)(i.a,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/film/:title",children:Object(j.jsx)(N,{token:e,setToken:t})}),Object(j.jsx)(l.a,{exact:!0,path:"/user-search/:userId",children:Object(j.jsx)(F,{token:e,setToken:t})}),Object(j.jsx)(l.a,{exact:!0,path:"/profile",children:Object(j.jsx)(T,{token:e,setToken:t})}),Object(j.jsx)(l.a,{exact:!0,path:"/login",children:Object(j.jsx)(y,{setToken:t})}),Object(j.jsx)(l.a,{exact:!0,path:"/registration",children:Object(j.jsx)(k,{setToken:t})}),Object(j.jsx)(l.a,{exact:!0,path:"/",children:Object(j.jsx)(f,{token:e,setToken:t})}),Object(j.jsx)(l.a,{path:"/",children:Object(j.jsx)(I,{})})]})})})};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.58df440c.chunk.js.map