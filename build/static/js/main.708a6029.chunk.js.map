{"version":3,"sources":["components/Homepage/Sidebar.js","components/Homepage/FilmCard.js","components/Homepage/Pagination.js","components/Homepage/Catalog.js","components/Navbar.js","components/Footer.js","components/Homepage/Home.js","components/Film/SearchedFilm.js","components/Login/Login.js","components/Registration/Registration.js","components/User/UserSidebar.js","components/User/UserCatalog.js","components/User/UserMenu.js","components/UserSearch/SearchUserSidebar.js","components/UserSearch/SearchUserCatalog.js","components/UserSearch/SearchUserMenu.js","components/404Page/Page404.js","App.js","index.js"],"names":["Sidebar","genres","currentGenre","setCurrentGenre","setIsRendered","id","filter","genre","name","map","index","onClick","e","target","innerText","Card","film","className","href","Title","src","Poster","alt","Plot","Genre","imdbRating","imdbVotes","Pagination","pagesNumber","onPageClick","currentPage","ListPages","content","push","data-page","Catalog","isRendered","changeGenreButton","useRef","articleFilms","articleGenres","titleGenre","films","paginationBar","getActualPageFilms","fetch","current","headers","Accept","then","response","json","listOfFilms","useEffect","res","pagesLength","Math","ceil","isNaN","dataset","page","changeMode","style","display","innerHTML","SectionFilms","Fragment","ref","imdbID","Navbar","token","setToken","userButton","logoutButton","history","useHistory","useState","input","setInput","results","setResults","user","setUser","suggestions","movieSearch","setMovieSearch","showResults","setShowResults","changeSearch","chosenSearch","tokenNotValid","checkAccess","Authorization","method","data","username","auth","tokenIsValid","catch","handleOutsideClick","event","contains","window","addEventListener","removeEventListener","timeoutSearch","setTimeout","Response","Search","clearTimeout","onSubmit","preventDefault","spellCheck","autoComplete","type","value","onChange","placeholder","length","undefined","opacity","document","cookie","Footer","Home","sort","a","b","localeCompare","SearchedFilm","setData","title","useParams","sectionFilm","colorLike","setColorLike","colorDislike","setColorDislike","followingLikes","setFollowingLikes","url","encodeURI","found","onLikeClick","rating","body","JSON","stringify","vote","voted","liked","likes","fetchFilmLike","Runtime","Released","Director","Actors","Awards","color","Login","message","setMessage","inputUsername","setInputUsername","inputPassword","setInputPassword","onFormSubmit","password","role","htmlFor","Registration","setUsername","mail","setMail","setPassoword","setIsFormValid","usernameInput","passwordInput","mailInput","validPassword","passwordHelper","validMail","mailHelper","validUsername","usernameHelper","submitButton","match","classList","remove","add","checkFormValid","disabled","backgroundColor","onGenreClick","UserCatalog","includes","UserFilms","clicked","allGenres","userGenres","userFilms","UserSidebar","toUpperCase","SearchUserFilms","favoriteGenre","userId","followed","setFollowed","buttonText","setButtonText","buttonColor","setButtonColor","followers","setFollowers","followings","setFollowings","viewFollowings","setViewFollowings","viewFollowers","setViewFollowers","genreCounts","flatMap","movie","split","trim","reduce","acc","Object","keys","cur","getFavoriteGenre","handleConnections","checkFollow","entries","key","class","borderColor","status","handleFollow","Page404","App","cname","ca","decodeURIComponent","i","c","charAt","substring","indexOf","getCookie","exact","path","SearchUserMenu","UserMenu","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.708a6029.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre, setIsRendered }) => {\r\n  return (\r\n    <aside>\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        {genres\r\n          .filter((genre) => genre.name !== currentGenre)\r\n          .map((genre, index) => {\r\n            return (\r\n              <li\r\n                key={index}\r\n                onClick={(e) => {\r\n                  setCurrentGenre(e.target.innerText)\r\n                  setIsRendered(false)\r\n                }}>\r\n                <span>\r\n                  <span>\r\n                    <span>{genre.name}</span>\r\n                  </span>\r\n                </span>\r\n              </li>\r\n            )\r\n          })}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst Card = ({ film }) => {\r\n  return (\r\n    <li className=\"card\">\r\n      <a href={`/film/${film.Title}`}>\r\n        <img className=\"card-img-top\" src={film.Poster} alt=\"Cardcap\" />\r\n      </a>\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">{film.Title}</h5>\r\n        <hr />\r\n        <p className=\"card-text\" id=\"plot\">\r\n          {film.Plot}\r\n        </p>\r\n        <h6 className=\"card-label\">GENRE</h6>\r\n        <p className=\"card-text\" id=\"filmGenre\">\r\n          {film.Genre}\r\n        </p>\r\n        <h6 className=\"card-label\">IMDB RATING</h6>\r\n        <p className=\"card-text\">\r\n          {film.imdbRating}\r\n          <i className=\"far fa-star\"></i> | {film.imdbVotes}\r\n          <i className=\"fas fa-vote-yea\"></i>\r\n        </p>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card\r\n","import React, { useState } from \"react\"\r\nimport \"./pagination.css\"\r\n\r\nconst Pagination = ({ pagesNumber, onPageClick, currentPage }) => {\r\n  const ListPages = () => {\r\n    const content = []\r\n    for (let index = 0; index < pagesNumber; index++) {\r\n      content.push(\r\n        <li\r\n          className={+currentPage === index ? \"active page-item\" : \"page-item\"}\r\n          data-page={index}\r\n          key={index}\r\n          onClick={onPageClick}>\r\n          {index + 1}\r\n        </li>\r\n      )\r\n    }\r\n\r\n    return content\r\n  }\r\n\r\n  return (\r\n    <ul className=\"pagination justify-content-center\">\r\n      {+currentPage > 0 ? (\r\n        <li\r\n          data-page={+currentPage - 1}\r\n          onClick={onPageClick}\r\n          className=\"page-item\">\r\n          <i className=\"fas fa-angle-double-left\"></i>\r\n        </li>\r\n      ) : null}\r\n      <ListPages />\r\n      {+currentPage + 1 < pagesNumber ? (\r\n        <li\r\n          data-page={+currentPage + 1}\r\n          onClick={onPageClick}\r\n          className=\"page-item\">\r\n          <i className=\"fas fa-angle-double-right\"></i>\r\n        </li>\r\n      ) : null}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Pagination\r\n","import React, { useEffect, useRef } from \"react\"\r\nimport Card from \"./FilmCard.js\"\r\nimport Pagination from \"./Pagination.js\"\r\n\r\nconst Catalog = ({\r\n  currentGenre,\r\n  genres,\r\n  setCurrentGenre,\r\n  isRendered,\r\n  setIsRendered\r\n}) => {\r\n  const changeGenreButton = useRef()\r\n  const articleFilms = useRef()\r\n  const articleGenres = useRef()\r\n  const titleGenre = useRef()\r\n  const films = useRef([])\r\n  const currentPage = useRef(0)\r\n  const pagesNumber = useRef()\r\n  const paginationBar = useRef()\r\n\r\n  const getActualPageFilms = () => {\r\n    fetch(`/films?genre=${currentGenre}&page=${currentPage.current}`, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ listOfFilms }) => {\r\n        films.current = listOfFilms\r\n        setIsRendered(true)\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    currentPage.current = 0\r\n    getActualPageFilms()\r\n  }, [currentGenre])\r\n\r\n  useEffect(() => {\r\n    fetch(`/pagination?genre=${currentGenre}`)\r\n      .then((res) => res.json())\r\n      .then(\r\n        ({ pagesLength }) => (pagesNumber.current = Math.ceil(pagesLength / 10))\r\n      )\r\n  })\r\n\r\n  const onPageClick = (e) => {\r\n    setIsRendered(false)\r\n    currentPage.current = isNaN(e.target.dataset.page)\r\n      ? 0\r\n      : e.target.dataset.page\r\n    getActualPageFilms()\r\n  }\r\n\r\n  const changeMode = () => {\r\n    if (articleFilms.current.style.display !== \"none\") {\r\n      articleFilms.current.style.display = \"none\"\r\n      paginationBar.current.style.display = \"none\"\r\n      articleGenres.current.style.display = \"grid\"\r\n      titleGenre.current.innerHTML = \"Choose the genre\"\r\n    } else {\r\n      articleFilms.current.style.display = \"grid\"\r\n      paginationBar.current.style.display = \"block\"\r\n      articleGenres.current.style.display = \"none\"\r\n      titleGenre.current.innerHTML = currentGenre\r\n    }\r\n  }\r\n\r\n  const SectionFilms = () => {\r\n    if (isRendered) {\r\n      return (\r\n        <React.Fragment>\r\n          <article id=\"articleFilms\" ref={articleFilms}>\r\n            {films.current.map((film) => {\r\n              return <Card film={film} key={film.imdbID} />\r\n            })}\r\n          </article>\r\n          <nav ref={paginationBar}>\r\n            {pagesNumber.current > 1 ? (\r\n              <Pagination\r\n                onPageClick={onPageClick}\r\n                pagesNumber={pagesNumber.current}\r\n                currentPage={currentPage.current}\r\n              />\r\n            ) : null}\r\n          </nav>\r\n        </React.Fragment>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div className=\"module-border-wrap\">\r\n        <div id=\"slogan\">\r\n          <img src=\"/img/logo.jpg\" alt=\"logo\" />\r\n          <h2>Search. Vote. Save.</h2>\r\n          <h1>ANY MOVIE IN YOUR MIND</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"genre\" id={currentGenre}>\r\n        <h1 id=\"currentGenre\" ref={titleGenre}>\r\n          {currentGenre}\r\n        </h1>\r\n        <i\r\n          id=\"changeGenre\"\r\n          ref={changeGenreButton}\r\n          onClick={changeMode}\r\n          className=\"fas fa-exchange-alt\"></i>\r\n      </div>\r\n\r\n      <SectionFilms />\r\n\r\n      <article id=\"articleGenres\" ref={articleGenres}>\r\n        <ul>\r\n          {genres\r\n            .filter((genre) => genre.name !== currentGenre)\r\n            .map((genre) => {\r\n              return (\r\n                <li\r\n                  key={genre.id}\r\n                  onClick={(e) => {\r\n                    setCurrentGenre(e.target.innerText)\r\n                    setIsRendered(false)\r\n                    changeMode()\r\n                  }}>\r\n                  <span>\r\n                    <span>\r\n                      <span>{genre.name}</span>\r\n                    </span>\r\n                  </span>\r\n                </li>\r\n              )\r\n            })}\r\n        </ul>\r\n      </article>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Catalog\r\n","import fetch from \"node-fetch\"\r\nimport React, { useState, useEffect, useRef } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nconst Navbar = ({ token, setToken}) => {\r\n  const userButton = useRef()\r\n  const logoutButton = useRef()\r\n  const history = useHistory()\r\n  const [input, setInput] = useState(\"\")\r\n  const [results, setResults] = useState([])\r\n  const [user, setUser] = useState('')\r\n  const suggestions = useRef()\r\n  const [movieSearch, setMovieSearch] = useState(true)\r\n  const [showResults, setShowResults] = useState(false)\r\n\r\n  const changeSearch = (chosenSearch) => {\r\n    if(movieSearch!==chosenSearch){\r\n      setInput('')\r\n      setResults([])\r\n      setMovieSearch(chosenSearch);\r\n    }\r\n  };\r\n\r\n  const tokenIsValid = (username) => {\r\n    setUser(username)\r\n    userButton.current.href = `/profile`\r\n    userButton.current.innerHTML = `<i class=\"fa fa-user\"></i> ${username}`\r\n    userButton.current.style[\"border-radius\"] = \"10px 0 0 10px\"\r\n    logoutButton.current.style.display = \"inline\"\r\n  }\r\n\r\n  const tokenNotValid = () => {\r\n    userButton.current.href = \"/login\"\r\n    userButton.current.innerHTML = \"<i class='fa fa-user'></i> GET STARTED\"\r\n    userButton.current.style[\"border-radius\"] = \"10px\"\r\n    logoutButton.current.style.display = \"none\"\r\n  }\r\n\r\n  const checkAccess = () => {\r\n    if (token !== \"\") {\r\n      fetch(\"/token\", {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          Authorization: \"Bearer \" + token\r\n        },\r\n        method: \"POST\"\r\n      })\r\n        .then((response) => {\r\n          return response.json()\r\n        })\r\n        .then((data) => {\r\n          const { username, auth } = data\r\n          auth ? tokenIsValid(username) : tokenNotValid()\r\n        })\r\n        .catch(() => {\r\n          tokenNotValid()\r\n        })\r\n    } else {\r\n      tokenNotValid()\r\n    }\r\n  }\r\n\r\n  const deleteToken = () => {\r\n    document.cookie =\r\n      \"jwt=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\r\n    setToken(\"\")\r\n    history.push(\"/\")\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleOutsideClick = (event) => {\r\n      if (suggestions.current && !suggestions.current.contains(event.target)) {\r\n        setShowResults(false)\r\n      } else {\r\n        setShowResults(true)\r\n      }\r\n    };\r\n\r\n    window.addEventListener('click', handleOutsideClick);\r\n\r\n    return () => {\r\n      window.removeEventListener('click', handleOutsideClick);\r\n    };\r\n  }, []); // Empty dependency array ensures this effect runs only once\r\n\r\n\r\n  useEffect(() => {\r\n    checkAccess()\r\n  }, [token])\r\n\r\n  useEffect(() => {\r\n    const timeoutSearch = setTimeout(() => {\r\n      if (input) {\r\n        if (movieSearch){\r\n          fetch(`/search-movie?s=${input}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            if (data.Response) {\r\n              setShowResults(true)\r\n              setResults(data.Search)\r\n            } else {\r\n              setResults([])\r\n            }\r\n          })\r\n          .catch(() => {\r\n            setResults([])\r\n          })\r\n        } else {\r\n          fetch(`/search-user?s=${input}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setShowResults(true)\r\n            setResults(data)\r\n          })\r\n          .catch(() => {\r\n            setResults([])\r\n          })\r\n        }\r\n        \r\n      }\r\n    }, 300)\r\n    return () => {\r\n      clearTimeout(timeoutSearch)\r\n    }\r\n  }, [input])\r\n\r\n  return (\r\n    <header>\r\n      <a href=\"/\">\r\n        <img src=\"/img/dkLogo.jpg\" alt=\"\" className=\"logo\" />\r\n      </a>\r\n\r\n      <form\r\n        id=\"searchFilm\"\r\n        className = {movieSearch ? 'searchFilm' : 'searchUsers'}\r\n        ref={suggestions}\r\n        onSubmit={(e) => {\r\n          e.preventDefault()\r\n        }}>\r\n\r\n        <input\r\n          className=\"input-field\"\r\n          spellCheck=\"false\"\r\n          autoComplete=\"off\"\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          id=\"inputFilm\"\r\n          name=\"title\"\r\n          placeholder= {movieSearch ? \"Search for a movie...\" : 'Search for a user...'}\r\n        />\r\n        <div id=\"suggestions\">\r\n          {(input.length === 0 || results === undefined || showResults === false) && (<span></span>)}\r\n          {(input.length>0 && results !== undefined && showResults === true && movieSearch === true) && (\r\n            <ul>\r\n                {results.map((film, index) => {\r\n                  return (\r\n                    <li key={index}>\r\n                      <a href={`/film/${film.Title}`}>\r\n                        <p>{film.Title}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                      </a>\r\n                    </li>\r\n                  )\r\n                })}\r\n              </ul>\r\n          )}\r\n          {(input.length>0 && results !== undefined && showResults === true && movieSearch === false) && (\r\n            <ul>\r\n              {results.map(({username, id}, index) => {\r\n                if (user !== username){\r\n                  return (\r\n                    <li key={index}>\r\n                      <a href={`/user-search/${id}`}>\r\n                        <p>{username}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                      </a>\r\n                    </li>\r\n                  )\r\n                }\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div id='changeSearch'>\r\n          <i className=\"fa-solid fa-film\" style={{ opacity: movieSearch ? 1 : 0.3 }} id='movieIcon' onClick={()=>changeSearch(true)}></i>\r\n          <i className=\"fa-solid fa-users\" style={{ opacity: movieSearch ? 0.3 : 1 }} id='usersIcon' onClick={()=>changeSearch(false)}></i>\r\n        </div>\r\n        \r\n      </form>\r\n\r\n      <div id=\"userInteraction\">\r\n        <a href=\"/login\" id=\"button-user\" ref={userButton}>\r\n          <i className=\"fa-solid fa-user\"></i> GET STARTED\r\n        </a>\r\n        <button id=\"button-logout\" ref={logoutButton} onClick={deleteToken}>\r\n          <i className=\"fa-solid fa-sign-out-alt\"></i> LOGOUT\r\n        </button>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Navbar\r\n","const Footer = () => {\r\n  return (\r\n    <footer className=\"page-footer font-small special-color-dark pt-4\">\r\n      <div className=\"container\">\r\n        <ul className=\"list-unstyled list-inline text-center\">\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.facebook.com/profile.php?id=100010848486989\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-facebook-f\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.instagram.com/matteo.mrl\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-instagram\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://www.linkedin.com/in/matteo-morellini-306a331a8/\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-linkedin\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              href=\"https://github.com/MatteoMorellini\"\r\n              className=\"btn-floating fa-lg fa-2x\">\r\n              <i className=\"fa-brands fa-github\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"footer-copyright text-center py-3\">\r\n        Created with passion by Matteo Morellini.\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport Sidebar from \"./Sidebar.js\"\r\nimport Catalog from \"./Catalog.js\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport \"./index.css\"\r\n\r\nconst Home = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"Action\")\r\n  const genres = useRef([])\r\n  const [isRendered, setIsRendered] = useState()\r\n\r\n  useEffect(() => {\r\n    fetch(\"/genres\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        genres.current = data\r\n        genres.current.sort((a,b) => {return a.name.localeCompare(b.name)})\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      <main className=\"main-homepage\">\r\n        <Sidebar\r\n          genres={genres.current}\r\n          currentGenre={currentGenre} // viene eliminato dalla lista il genere corrente\r\n          setCurrentGenre={setCurrentGenre} // nel momento in cui un genere viene cliccato, diventa il corrente\r\n          setIsRendered={setIsRendered} // con un nuovo genere è necessario un nuovo caricamento\r\n        />\r\n        <Catalog\r\n          currentGenre={currentGenre} // per il titolo della section\r\n          setCurrentGenre={setCurrentGenre} // con le mq il menù dei generi passa nel Catalog\r\n          genres={genres.current}\r\n          setIsRendered={setIsRendered} // con un nuovo genere è necessario un nuovo caricamento\r\n          isRendered={isRendered} // effetto loading\r\n        />\r\n      </main>\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","import fetch from \"node-fetch\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport \"./searchFilm.css\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\n\r\nconst SearchedFilm = ({ token, setToken}) => {\r\n  const [data, setData] = useState()\r\n  const [isRendered, setIsRendered] = useState(false)\r\n  const { title } = useParams()\r\n  const sectionFilm = useRef()\r\n  const [colorLike, setColorLike] = useState('black')\r\n  const [colorDislike, setColorDislike] = useState('black')\r\n  const [followingLikes, setFollowingLikes] = useState(false)\r\n\r\n  const fetchFilmLike = () => {\r\n    const url = encodeURI(`/film-like/${title}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    }).then((res) => res.json())\r\n    .then(({ auth, likes }) => {\r\n      if (auth && likes) {\r\n        setFollowingLikes(likes)\r\n      } else {\r\n        setFollowingLikes([])\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const url = encodeURI(`/film-data/${title}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    })\r\n      .then((res) => res.json())\r\n      .then(({ data, found }) => {\r\n        if (found) {\r\n          setData(data)\r\n        }\r\n        setIsRendered(true)\r\n      })\r\n  }, [])\r\n\r\n  const onLikeClick = (rating) => {\r\n    fetch(\"/vote\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      body: JSON.stringify({ title, rating }),\r\n      method: \"PUT\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, vote }) => {\r\n        if (auth && vote) {\r\n          if (rating && colorLike === 'black') {\r\n            setColorLike('green')\r\n            if(colorDislike === 'red'){\r\n              setColorDislike('black')\r\n            }\r\n          } else if (colorDislike === 'black') {\r\n            setColorDislike('red')\r\n            if(colorLike === 'green'){\r\n              setColorLike('black')\r\n            }\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  const checkLike = () => {\r\n    fetch('/vote', {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      body: JSON.stringify({ title }),\r\n      method: \"POST\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, voted, liked }) => {\r\n        if (auth && voted) {\r\n          if (liked && colorLike === 'black') {\r\n            setColorLike('green')\r\n            if(colorDislike === 'red'){\r\n              setColorDislike('black')\r\n            }\r\n          } else if (colorDislike === 'black') {\r\n            setColorDislike('red')\r\n            if(colorLike === 'green'){\r\n              setColorLike('black')\r\n            }\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(token){\r\n      checkLike()\r\n      fetchFilmLike()\r\n    }\r\n  }, [token])\r\n\r\n  if (isRendered) {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar token={token} setToken={setToken}/>\r\n        {data !== undefined ? (\r\n          <section id=\"specificFilm\" ref={sectionFilm}>\r\n            <img src={data.Poster} alt=\"\" />\r\n            <div id=\"filmInformation\">\r\n              <h1 id=\"title\">{data.Title}</h1>\r\n              <h5 id=\"plot\">{data.Plot}</h5>\r\n              <h5 id=\"genre\">{data.Genre}</h5>\r\n              <h5 id=\"runtime\">{data.Runtime}</h5>\r\n              <h5 id=\"released\">{data.Released}</h5>\r\n              <h5 id=\"director\">Director: {data.Director}</h5>\r\n              <h5 id=\"actors\">Actors: {data.Actors}</h5>\r\n              <h5 id=\"awards\">{data.Awards}</h5>\r\n              <h5 id=\"imdbRating\">\r\n                {data.imdbRating} <i className=\"far fa-star\"></i> |{\" \"}\r\n                {data.imdbVotes} <i className=\"fas fa-vote-yea\"></i> IMDb\r\n                ratings\r\n              </h5>\r\n              {followingLikes!==false && (\r\n              <div id='friendsLike'>\r\n                    {followingLikes.length>0 && (\r\n                      <h5>People you follow that liked this movie: {followingLikes.map(([id, user], index) => (\r\n                        <React.Fragment key={index}>\r\n                        <a href={`/user-search/${id}`}>{user}</a>{index < followingLikes.length - 1 && ', '}\r\n                        </React.Fragment>\r\n                      ))}</h5>\r\n                    )}\r\n                    {followingLikes.length===0 && (\r\n                      <h5>None of the people you follow liked this movie yet</h5>\r\n                    )}\r\n                  </div>)}\r\n              {token && (\r\n                <div>\r\n                  <div id=\"vote\">\r\n                    <h5 id=\"textRating\">Rate the film</h5>\r\n                    <i className=\"fas fa-thumbs-up\" style={{color: colorLike}} onClick={() => onLikeClick(1)}></i>\r\n                    <i className=\"fas fa-thumbs-down\" style ={{color: colorDislike}} onClick={() => onLikeClick(0)} ></i>\r\n                  </div>\r\n\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        ) : (\r\n          <div id=\"filmNotFound\">\r\n            <h1>\r\n              FILM <span>NOT FOUND</span> TRY ANOTHER NAME\r\n            </h1>\r\n          </div>\r\n        )}\r\n        <Footer />\r\n      </React.Fragment>\r\n    )\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar token={token} />\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>{\" \"}\r\n        <Footer />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SearchedFilm\r\n","import fetch from \"node-fetch\"\r\nimport React, { useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport \"./login.css\"\r\n\r\nconst Login = ({ setToken }) => {\r\n  const [message, setMessage] = useState()\r\n  const [inputUsername, setInputUsername] = useState(\"\")\r\n  const [inputPassword, setInputPassword] = useState(\"\")\r\n  const history = useHistory()\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (inputUsername.length > 0 && inputPassword.length > 0) {\r\n      fetch(\"/login\", {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          username: inputUsername,\r\n          password: inputPassword\r\n        })\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.message) {\r\n            setMessage(data.message)\r\n          } else {\r\n            setToken(data.token)\r\n            history.push(\"/\")\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"loginPage\">\r\n      <form id=\"loginForm\" onSubmit={onFormSubmit}>\r\n        <a href=\"/\">\r\n          <img src=\"/img/dkLogo.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n\r\n        {message === undefined ? (\r\n          <h1 id=\"title\">Log in</h1>\r\n        ) : (\r\n          <div className=\"alert alert-danger\" role=\"alert\">\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            value={inputUsername}\r\n            spellCheck=\"false\"\r\n            onChange={(e) => setInputUsername(e.target.value)}\r\n            autoComplete=\"username\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={inputPassword}\r\n            onChange={(e) => {\r\n              setInputPassword(e.target.value)\r\n            }}\r\n            autoComplete=\"new-password\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <a id=\"registrationLink\" href=\"/registration\">\r\n            Do not have an account? Create it now\r\n          </a>\r\n        </div>\r\n\r\n        <button className=\"btn\" onClick={onFormSubmit}>\r\n          SUBMIT\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import fetch from \"node-fetch\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport \"./registration.css\"\r\n\r\nconst Registration = ({ setToken }) => {\r\n  const [username, setUsername] = useState(\"\")\r\n  const [mail, setMail] = useState(\"\")\r\n  const [password, setPassoword] = useState(\"\")\r\n  const [isFormValid, setIsFormValid] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n\r\n  const history = useHistory()\r\n\r\n  const usernameInput = useRef()\r\n  const passwordInput = useRef()\r\n  const mailInput = useRef()\r\n  const validPassword = useRef(false)\r\n  const passwordHelper = useRef()\r\n  const validMail = useRef(false)\r\n  const mailHelper = useRef()\r\n  const validUsername = useRef(false)\r\n  const usernameHelper = useRef()\r\n\r\n  const submitButton = useRef()\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(\"/registration\", {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify({ username, mail, password })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.message) {\r\n          setMessage(data.message)\r\n        } else {\r\n          setToken(data.token)\r\n          history.push(\"\")\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      const regex = /^(?=.{3,14}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/\r\n      if (username.match(regex)) {\r\n        validUsername.current = true\r\n        usernameHelper.current.style.color = \"green\"\r\n        usernameInput.current.classList.remove(\"invalid\")\r\n        usernameInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        validUsername.current = false\r\n        usernameHelper.current.style.color = \"red\"\r\n        usernameInput.current.classList.remove(\"valid\")\r\n        usernameInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (mail) {\r\n      const regex = /^[^ ]+@[^ ]+\\.[a-z]{2,3}$/\r\n      if (mail.match(regex)) {\r\n        mailHelper.current.innerHTML = \"<i class='fas fa-info'></i> Valid email\"\r\n        mailHelper.current.style.color = \"green\"\r\n        validMail.current = true\r\n        mailInput.current.classList.remove(\"invalid\")\r\n        mailInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        mailHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> Invalid email\"\r\n        mailHelper.current.style.color = \"red\"\r\n        validMail.current = false\r\n        mailInput.current.classList.remove(\"valid\")\r\n        mailInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  }, [mail])\r\n\r\n  useEffect(() => {\r\n    if (password) {\r\n      const regex = /^[A-Za-z]\\w{5,13}$/\r\n      if (password.match(regex)) {\r\n        passwordHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> Valid password\"\r\n        passwordHelper.current.style.color = \"green\"\r\n        validPassword.current = true\r\n        passwordInput.current.classList.remove(\"invalid\")\r\n        passwordInput.current.classList.add(\"valid\")\r\n        checkFormValid()\r\n      } else {\r\n        passwordHelper.current.innerHTML =\r\n          \"<i class='fas fa-info'></i> 7 to 15 characters and the first must be a letter\"\r\n        passwordHelper.current.style.color = \"red\"\r\n        validPassword.current = false\r\n        passwordInput.current.classList.remove(\"valid\")\r\n        passwordInput.current.classList.add(\"invalid\")\r\n      }\r\n    }\r\n  }, [password])\r\n\r\n  const checkFormValid = () => {\r\n    if (validUsername.current && validMail.current && validPassword.current) {\r\n      submitButton.current.disabled = false\r\n      submitButton.current.style.backgroundColor = \"white\"\r\n      submitButton.current.style.color = \"black\"\r\n      submitButton.current.classList = \"btn btn-abled\"\r\n      setIsFormValid(true)\r\n    } else {\r\n      submitButton.current.disabled = true\r\n      submitButton.current.style.backgroundColor = \"red\"\r\n      submitButton.current.classList = \"btn\"\r\n      setIsFormValid(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"registrationPage\">\r\n      <form onSubmit={onFormSubmit} className=\"form-registration\">\r\n        <a href=\"/\">\r\n          <img src=\"/img/dkLogo.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n        {message && (\r\n          <div className=\"alert alert-danger\" role=\"alert\">\r\n            {message}\r\n          </div>\r\n        )}\r\n        <h1 id=\"title\">Create account</h1>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            ref={usernameInput}\r\n            className=\"form-control\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            autoComplete=\"username\"\r\n          />\r\n          <small id=\"usernameHelp\" className=\"form-text\" ref={usernameHelper}>\r\n            <i className=\"fas fa-info\"></i> Letters between 4 and 15\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail\">Email address</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            id=\"mail\"\r\n            ref={mailInput}\r\n            name=\"mail\"\r\n            value={mail}\r\n            onChange={(e) => setMail(e.target.value)}\r\n            autoComplete=\"email\"\r\n          />\r\n          <small id=\"emailHelper\" className=\"form-text\" ref={mailHelper}>\r\n            <i className=\"fas fa-info\"></i> Insert a valid email\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            ref={passwordInput}\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassoword(e.target.value)}\r\n            autoComplete=\"new-password\"\r\n          />\r\n          <small id=\"passwordHelp\" ref={passwordHelper} className=\"form-text\">\r\n            <i className=\"fas fa-info\"></i> 7 to 15 characters and the first\r\n            must be a letter\r\n          </small>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn\"\r\n          ref={submitButton}\r\n          onClick={onFormSubmit}\r\n          disabled>\r\n          SUBMIT\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Registration\r\n","import React, { useEffect } from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre }) => {\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n  return (\r\n    <aside className=\"user-genres\">\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        <li key=\"0\" onClick={onGenreClick}>\r\n          All genres\r\n        </li>\r\n        {genres\r\n          .filter((genre) => genre !== currentGenre)\r\n          .map((genre, index) => (\r\n            <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n              {genre}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst UserCatalog = ({ films, currentGenre }) => {\r\n  return (\r\n    <article className=\"user-films\">\r\n      <div id=\"title\">\r\n        <h1>MOVIES YOU LIKED</h1>\r\n      </div>\r\n      <section id=\"favouriteFilms\">\r\n        {films\r\n          .filter((film) => film.Genre.includes(currentGenre))\r\n          .map((film, index) => {\r\n            return (\r\n              <div className=\"card\" key={index}>\r\n                <a href={`/film/${film.Title}`}>\r\n                  <img\r\n                    className=\"card-img-top\"\r\n                    src={film.Poster}\r\n                    alt=\"Cardcap\"\r\n                  />\r\n                </a>\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{film.Title}</h5>\r\n                  <p className=\"card-text\" id=\"rating\">\r\n                    {film.imdbRating} <i className=\"far fa-star\"></i>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n      </section>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default UserCatalog\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport UserSidebar from \"./UserSidebar.js\"\r\nimport \"./userCatalog.css\"\r\nimport UserCatalog from \"./UserCatalog.js\"\r\n\r\nconst UserFilms = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"\")\r\n  const genres = useRef()\r\n  const [isRendered, setIsRendered] = useState(false)\r\n  const films = useRef()\r\n  const clicked = useRef(false)\r\n  const allGenres = useRef()\r\n\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  const onButtonFilterClick = () => {\r\n    if (clicked.current) {\r\n      clicked.current = false\r\n      allGenres.current.style.display = \"none\"\r\n    } else {\r\n      clicked.current = true\r\n      allGenres.current.style.display = \"block\"\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (token !== \"\") {\r\n      fetch(`/user-data`, {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          Authorization: \"Bearer \" + token\r\n        }\r\n      })\r\n        .then((response) => response.json())\r\n        .then(({ userGenres, userFilms, auth }) => {\r\n          if (auth) {\r\n            genres.current = userGenres\r\n            films.current = userFilms\r\n            setIsRendered(true)\r\n          }\r\n        })\r\n    } \r\n  }, [token])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      {isRendered ? (\r\n        films.current.length > 0 ? (\r\n          <React.Fragment>\r\n            <div id=\"filterGenres\" onClick={onButtonFilterClick}>\r\n              <i className=\"fas fa-sort-down\"></i> Filter by genre{\" \"}\r\n              <i className=\"fas fa-sort-down\"></i>\r\n            </div>\r\n            <div id=\"allGenres\" ref={allGenres}>\r\n              <ul>\r\n                <li key=\"0\" onClick={onGenreClick}>\r\n                  All genres\r\n                </li>\r\n                {genres.current\r\n                  .filter((genre) => genre !== currentGenre)\r\n                  .map((genre, index) => (\r\n                    <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n                      {genre}\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n            <main>\r\n              <React.Fragment>\r\n                <UserSidebar\r\n                  genres={genres.current}\r\n                  currentGenre={currentGenre}\r\n                  setCurrentGenre={setCurrentGenre}\r\n                />\r\n                <UserCatalog\r\n                  films={films.current}\r\n                  currentGenre={currentGenre}\r\n                />\r\n              </React.Fragment>\r\n            </main>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div id=\"noFilm\">\r\n            <h1>\r\n              you haven't <span>voted</span> any movie yet.\r\n            </h1>\r\n          </div>\r\n        )\r\n      ) : (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )}\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default UserFilms\r\n","import React, { useEffect } from \"react\"\r\n\r\nconst Sidebar = ({ genres, currentGenre, setCurrentGenre }) => {\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  return (\r\n    <aside className=\"user-genres\">\r\n      <div id=\"genresLegend\">\r\n        <h1>GENRES</h1>\r\n      </div>\r\n      <ul>\r\n        <li key=\"0\" onClick={onGenreClick}>\r\n          All\r\n        </li>\r\n        {genres\r\n          .map((genre, index) => (\r\n            <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n              {genre}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst UserCatalog = ({ films, currentGenre, username}) => {\r\n  return (\r\n    <article className=\"user-films\">\r\n      <div id=\"title\">\r\n        <h1>{currentGenre.toUpperCase()} MOVIES THAT {username.toUpperCase()} LIKED</h1>\r\n      </div>\r\n      <section id=\"favouriteFilms\">\r\n        {films\r\n          .filter((film) => film.Genre.includes(currentGenre))\r\n          .map((film, index) => {\r\n            return (\r\n              <div className=\"card\" key={index}>\r\n                <a href={`/film/${film.Title}`}>\r\n                  <img\r\n                    className=\"card-img-top\"\r\n                    src={film.Poster}\r\n                    alt=\"Cardcap\"\r\n                  />\r\n                </a>\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{film.Title}</h5>\r\n                  <p className=\"card-text\" id=\"rating\">\r\n                    {film.imdbRating} <i className=\"far fa-star\"></i>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n      </section>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default UserCatalog\r\n","import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport Navbar from \"../Navbar.js\"\r\nimport Footer from \"../Footer.js\"\r\nimport UserSidebar from \"./SearchUserSidebar.js\"\r\nimport \"./searchUserCatalog.css\"\r\nimport UserCatalog from \"./SearchUserCatalog.js\"\r\n\r\nconst SearchUserFilms = ({ token, setToken}) => {\r\n  const [currentGenre, setCurrentGenre] = useState(\"\")\r\n  const genres = useRef()\r\n  const films = useRef()\r\n  const favoriteGenre = useRef()\r\n  const { userId } = useParams()\r\n  const clicked = useRef(false)\r\n  const allGenres = useRef()\r\n  const [username, setUsername] = useState('')\r\n  const [followed, setFollowed] = useState(false)\r\n  const [buttonText, setButtonText] = useState('Follow'); // Initial text\r\n  const [buttonColor, setButtonColor] = useState('#68beff');\r\n  const [followers, setFollowers] = useState({})\r\n  const [followings, setFollowings] = useState({})\r\n  const [viewFollowings, setViewFollowings] = useState('none')\r\n  const [viewFollowers, setViewFollowers] = useState('none')\r\n\r\n  const onGenreClick = (e) => {\r\n    setCurrentGenre(e.target.id)\r\n  }\r\n\r\n  const onButtonFilterClick = () => {\r\n    if (clicked.current) {\r\n      clicked.current = false\r\n      allGenres.current.style.display = \"none\"\r\n    } else {\r\n      clicked.current = true\r\n      allGenres.current.style.display = \"block\"\r\n    }\r\n  }\r\n\r\n  const checkFollow = () => {\r\n    const url = encodeURI(`/follow/${userId}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      }\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, followed}) => {\r\n        if (auth && followed) {\r\n          setFollowed(true)\r\n        }\r\n      })\r\n  }\r\n\r\n  const handleFollow = () => {\r\n    const url = encodeURI(`/${followed ? 'un' : ''}follow/${userId}`)\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token\r\n      },\r\n      method: \"PUT\"\r\n    })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then(({ auth, status }) => {\r\n        if (auth && status) {\r\n          setFollowed(!followed)\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleConnections = () => {\r\n      const url = encodeURI(`/connections/${userId}`)\r\n      fetch(url)\r\n        .then((response) => {\r\n          return response.json()\r\n        })\r\n        .then(({followers, followings }) => {\r\n          setFollowings(followings)\r\n          setFollowers(followers)\r\n        })\r\n    }\r\n    const getFavoriteGenre = () => {\r\n      const allGenres = films.current.flatMap(movie => movie.Genre.split(',').map(genre => genre.trim()));\r\n      const genreCounts = allGenres.reduce((acc, genre) => {\r\n        acc[genre] = (acc[genre] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n      const maxKey = Object.keys(genreCounts).reduce((res, cur) => {return genreCounts[res]>genreCounts[cur] ? res : cur})\r\n      return maxKey\r\n    }\r\n    const getUserData = () => {\r\n      fetch(`/search-user-data/${userId}`)\r\n        .then((response) => response.json())\r\n        .then(({ username, userGenres, userFilms}) => {\r\n          if(username!==''){\r\n            genres.current = userGenres\r\n            films.current = userFilms\r\n            favoriteGenre.current = films.current.length > 0 ? getFavoriteGenre() : 'None'\r\n            setUsername(username)\r\n          }\r\n        })\r\n    }\r\n    getUserData()\r\n    handleConnections()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setButtonText(followed ? 'Unfollow' : 'Follow');\r\n    setButtonColor(followed ? '#ff9900' : '#68beff');\r\n  }, [followed])\r\n\r\n  useEffect(() => {\r\n    if(token){\r\n      checkFollow()\r\n    }\r\n  }, [token]) //because during the first load the navbar changes the token from ''\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Navbar token={token} setToken={setToken}/>\r\n      <div id=\"followings-div\" style={{display: viewFollowings}}></div>\r\n      \r\n        <div id='followings-div2' style={{display: viewFollowings}}>\r\n          <h3>Followings</h3>\r\n          <ul>\r\n            {Object.entries(followings).map(([key,value]) => {\r\n                return (\r\n                  <li key={key}>\r\n                    <a href={`/user-search/${key}`}>\r\n                    <p>{value}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                    </a>\r\n                  </li>\r\n                )\r\n            })}\r\n          </ul>\r\n          <i onClick={()=>{setViewFollowings('none')}} class=\"fa-solid fa-xmark\"></i>\r\n        </div>\r\n        <div id=\"followings-div\" style={{display: viewFollowers}}></div>\r\n      \r\n        <div id='followings-div2' style={{display: viewFollowers}}>\r\n          <h3>Followers</h3>\r\n          <ul>\r\n            {Object.entries(followers).map(([key,value]) => {\r\n                return (\r\n                  <li key={key}>\r\n                    <a href={`/user-search/${key}`}>\r\n                    <p>{value}</p> <i className=\"fa-solid fa-arrow-right\"></i>\r\n                    </a>\r\n                  </li>\r\n                )\r\n            })}\r\n          </ul>\r\n          <i onClick={()=>{setViewFollowers('none')}} class=\"fa-solid fa-xmark\"></i>\r\n        </div>\r\n      {username !== '' ? (\r\n        \r\n        <div id='searched-user'>\r\n            <div id='user-info'>\r\n              <div id='username-div'>@{username}</div>\r\n              <div className=\"other\" onClick={()=>{setViewFollowers('block')}}>FOLLOWERS: {Object.keys(followers).length}</div>\r\n              <div className=\"other\" onClick={()=>{setViewFollowings('block')}}>FOLLOWINGS: {Object.keys(followings).length}</div>\r\n              <div className=\"other\">FAVORITE GENRE: {favoriteGenre.current}</div>\r\n              {token && (\r\n                <div id=\"follow-button\" style={{color: buttonColor, borderColor: buttonColor}} onClick={() => {handleFollow()}}>\r\n                  {buttonText}\r\n                </div>\r\n              )}\r\n            </div>\r\n          \r\n        {films.current.length > 0 ? (\r\n          <React.Fragment>\r\n            <div id=\"filterGenres\" onClick={onButtonFilterClick}>\r\n              <i className=\"fas fa-sort-down\"></i> Filter by genre{\" \"}\r\n              <i className=\"fas fa-sort-down\"></i>\r\n            </div>\r\n            <div id=\"allGenres\" ref={allGenres}>\r\n              <ul>\r\n                <li key=\"0\" onClick={onGenreClick}>\r\n                  All genres\r\n                </li>\r\n                {genres.current\r\n                  .filter((genre) => genre !== currentGenre)\r\n                  .map((genre, index) => (\r\n                    <li key={index + 1} id={genre} onClick={onGenreClick}>\r\n                      {genre}\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n            <main>\r\n              <React.Fragment>\r\n                <UserSidebar\r\n                  genres={genres.current}\r\n                  currentGenre={currentGenre}\r\n                  setCurrentGenre={setCurrentGenre}\r\n                />\r\n                <UserCatalog\r\n                  films={films.current}\r\n                  currentGenre={currentGenre}\r\n                  username = {username}\r\n                />\r\n              </React.Fragment>\r\n            </main>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div id=\"noFilm\">\r\n            <h1>\r\n              They haven't <span>voted</span> any movie yet.\r\n            </h1>\r\n          </div>\r\n        )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"lds-ellipsis\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      )}\r\n      <Footer />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SearchUserFilms\r\n","import React from \"react\"\r\nimport \"./page404.css\"\r\nconst Page404 = () => {\r\n  return (\r\n    <div className=\"body-error404\">\r\n      <div className=\"div-error404\">\r\n        <a href=\"/\">\r\n          <img src=\"/img/logo2.jpg\" id=\"imgLogo\" alt=\"\" />\r\n        </a>\r\n        <h1>\r\n          <i class=\"fas fa-exclamation-triangle\"></i> ERROR 404{\" \"}\r\n          <i class=\"fas fa-exclamation-triangle\"></i> <br /> PAGE NOT FOUND{\" \"}\r\n        </h1>\r\n        <a href=\"/\" id=\"homepageLink\">\r\n          <i class=\"fas fa-home\"></i> BACK TO HOME PAGE{\" \"}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Page404\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\nimport Home from \"./components/Homepage/Home.js\"\r\nimport SearchedFilm from \"./components/Film/SearchedFilm.js\"\r\nimport Login from \"./components/Login/Login.js\"\r\nimport Registration from \"./components/Registration/Registration.js\"\r\nimport UserMenu from \"./components/User/UserMenu.js\"\r\nimport SearchUserMenu from './components/UserSearch/SearchUserMenu.js'\r\nimport Page404 from \"./components/404Page/Page404.js\"\r\nimport \"./components/Homepage/index.css\"\r\nconst App = () => {\r\n  const getCookie = (cname) => {\r\n    const name = cname + \"=\"\r\n    const decodedCookie = decodeURIComponent(document.cookie)\r\n    const ca = decodedCookie.split(\";\")\r\n    for (let i = 0; i < ca.length; i++) {\r\n      let c = ca[i]\r\n      while (c.charAt(0) === \" \") {\r\n        c = c.substring(1)\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length)\r\n      }\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const [token, setToken] = useState(\"\")\r\n  useEffect(() => {\r\n    setToken(getCookie(\"jwt\"))\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/film/:title\">\r\n            <SearchedFilm token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/user-search/:userId\">\r\n            <SearchUserMenu token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/profile\">\r\n            <UserMenu token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route exact path=\"/login\">\r\n            <Login setToken={setToken} />\r\n          </Route>\r\n          <Route exact path=\"/registration\">\r\n            <Registration setToken={setToken} />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Home token={token} setToken={setToken}/>\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Page404 />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./App\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}